"use strict";(()=>{var t={};t.id=6668,t.ids=[6668],t.modules={53524:t=>{t.exports=require("@prisma/client")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},31215:(t,e,r)=>{r.r(e),r.d(e,{headerHooks:()=>h,originalPathname:()=>_,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>x});var a={};r.r(a),r.d(a,{GET:()=>d,PUT:()=>p});var s=r(95419),n=r(69108),i=r(99678),o=r(78070);let u=new(r(53524)).PrismaClient;async function d(){try{let t=await u.setting.findFirst();if(!t)return o.Z.json({system_name:"MADAR POS",currency:"USD",tax_rate:0});return o.Z.json({...t,tax_rate:Number(t.tax_rate)})}catch(t){return console.error("Error fetching settings:",t),o.Z.json({message:"Failed to fetch settings"},{status:500})}}async function p(t){try{let e;let{systemName:r,currency:a,taxRate:s}=await t.json();if(!r)return o.Z.json({message:"System name is required"},{status:400});let n=await u.setting.findFirst();return e=n?await u.setting.update({where:{setting_id:n.setting_id},data:{system_name:r,currency:a,tax_rate:s}}):await u.setting.create({data:{system_name:r,currency:a,tax_rate:s}}),o.Z.json({...e,tax_rate:Number(e.tax_rate)})}catch(t){return console.error("Error updating settings:",t),o.Z.json({message:"Failed to update settings"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/settings/route",pathname:"/api/settings",filename:"route",bundlePath:"app/api/settings/route"},resolvedPagePath:"C:\\Users\\mubar\\Desktop\\MADAR\\app\\api\\settings\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:l,headerHooks:h,staticGenerationBailout:x}=c,_="/api/settings/route";function f(){return(0,i.patchFetch)({serverHooks:l,staticGenerationAsyncStorage:m})}}};var e=require("../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),a=e.X(0,[1638,6206],()=>r(31215));module.exports=a})();