"use strict";(()=>{var e={};e.id=4468,e.ids=[4468],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},35127:(e,t,a)=>{a.r(t),a.d(t,{headerHooks:()=>v,originalPathname:()=>b,patchFetch:()=>y,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>g});var r={};a.r(r),a.d(r,{GET:()=>l,dynamic:()=>d});var n=a(95419),o=a(69108),s=a(99678),u=a(78070),i=a(3214);let d="force-dynamic";async function l(e){try{let{searchParams:t}=new URL(e.url),a=t.get("days")?parseInt(t.get("days")):7,r=new Date,n=new Date;n.setDate(r.getDate()-a);let o=await i.Z.sale.findMany({where:{sale_date:{gte:n,lte:r}},select:{sale_date:!0,total_amount:!0}}),s={};for(let e=0;e<a;e++){let t=new Date(n);t.setDate(t.getDate()+e+1),s[t.toLocaleDateString("en-US",{month:"short",day:"numeric"})]=0}o.forEach(e=>{let t=new Date(e.sale_date).toLocaleDateString("en-US",{month:"short",day:"numeric"});void 0!==s[t]?s[t]+=Number(e.total_amount):s[t]=(s[t]||0)+Number(e.total_amount)});let d=Object.keys(s).map(e=>({name:e,revenue:s[e]}));return u.Z.json(d)}catch(e){return console.error("Revenue API Error:",e),u.Z.json({message:"Failed to fetch revenue data"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/dashboard/revenue/route",pathname:"/api/dashboard/revenue",filename:"route",bundlePath:"app/api/dashboard/revenue/route"},resolvedPagePath:"C:\\Users\\mubar\\Desktop\\MADAR\\app\\api\\dashboard\\revenue\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:h,headerHooks:v,staticGenerationBailout:g}=c,b="/api/dashboard/revenue/route";function y(){return(0,s.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}},3214:(e,t,a)=>{a.d(t,{Z:()=>n});var r=a(53524);let n=global.prisma||new r.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[1638,6206],()=>a(35127));module.exports=r})();