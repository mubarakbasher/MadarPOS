"use strict";(()=>{var e={};e.id=9710,e.ids=[9710],e.modules={53524:e=>{e.exports=require("@prisma/client")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},95313:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>w,originalPathname:()=>m,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>b,staticGenerationBailout:()=>Z});var a={};t.r(a),t.d(a,{DELETE:()=>h,GET:()=>c,PUT:()=>d});var n=t(95419),i=t(69108),s=t(99678),o=t(78070),u=t(3214);async function c(e,{params:r}){try{let e=parseInt(r.id),t=await u.Z.branch.findUnique({where:{branch_id:e}});if(!t)return o.Z.json({error:"Branch not found"},{status:404});return o.Z.json(t)}catch(e){return o.Z.json({error:"Failed to fetch branch"},{status:500})}}async function d(e,{params:r}){try{let t=parseInt(r.id),{branch_name:a,location:n,phone:i}=await e.json(),s=await u.Z.branch.update({where:{branch_id:t},data:{branch_name:a,location:n,phone:i}});return o.Z.json(s)}catch(e){return o.Z.json({error:"Failed to update branch"},{status:500})}}async function h(e,{params:r}){try{let e=parseInt(r.id),t=await u.Z.inventory.findFirst({where:{branch_id:e}}),a=await u.Z.sale.findFirst({where:{branch_id:e}});if(t||a)return o.Z.json({error:"Cannot delete branch with associated inventory or history."},{status:400});return await u.Z.branch.delete({where:{branch_id:e}}),o.Z.json({message:"Branch deleted successfully"})}catch(e){return o.Z.json({error:"Failed to delete branch"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/branches/[id]/route",pathname:"/api/branches/[id]",filename:"route",bundlePath:"app/api/branches/[id]/route"},resolvedPagePath:"C:\\Users\\mubar\\Desktop\\MADAR\\app\\api\\branches\\[id]\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:l,staticGenerationAsyncStorage:b,serverHooks:f,headerHooks:w,staticGenerationBailout:Z}=p,m="/api/branches/[id]/route";function y(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:b})}},3214:(e,r,t)=>{t.d(r,{Z:()=>n});var a=t(53524);let n=global.prisma||new a.PrismaClient}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[1638,6206],()=>t(95313));module.exports=a})();