(()=>{var e={};e.id=3311,e.ids=[3311],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3780:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>d,routeModule:()=>b,tree:()=>l});var r=s(50482),n=s(69108),a=s(62563),i=s.n(a),o=s(68300),c={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l=["",{children:["reports",{children:["export",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,38499)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\reports\\export\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,59515)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\mubar\\Desktop\\MADAR\\app\\reports\\export\\page.tsx"],x="/reports/export/page",u={require:s,loadChunk:()=>Promise.resolve()},b=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/reports/export/page",pathname:"/reports/export",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},51329:(e,t,s)=>{Promise.resolve().then(s.bind(s,59209))},59209:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95344),n=s(47983),a=s.n(n);function i({data:e}){let t=e.settings.currency||"USD",s="USD"===t?"$":t;return(0,r.jsxs)(r.Fragment,{children:[r.jsx(a(),{id:"1d122cbc8249bf48",children:"@media print{body *{visibility:hidden}#print-content,#print-content *{visibility:visible}#print-content{position:absolute;left:0;top:0;width:100%;padding:0;margin:0}#print-content *{background:white!important;-webkit-box-shadow:none!important;-moz-box-shadow:none!important;box-shadow:none!important}#print-content{color:black!important}.no-print{display:none!important}table{page-break-inside:avoid}thead{display:table-header-group}tr{page-break-inside:avoid}}@media screen{.print-page{min-height:100vh;background:-webkit-linear-gradient(top,#f3f4f6 0%,#fff 100%);background:-moz-linear-gradient(top,#f3f4f6 0%,#fff 100%);background:-o-linear-gradient(top,#f3f4f6 0%,#fff 100%);background:linear-gradient(to bottom,#f3f4f6 0%,#fff 100%)}}"}),r.jsx("div",{className:"jsx-1d122cbc8249bf48 print-page",children:(0,r.jsxs)("div",{id:"print-content",className:"jsx-1d122cbc8249bf48 max-w-7xl mx-auto p-8 bg-white shadow-lg my-8",children:[(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 no-print mb-6 flex justify-between items-center border-b pb-4",children:[(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48",children:[r.jsx("h1",{className:"jsx-1d122cbc8249bf48 text-2xl font-bold text-gray-800",children:"Sales Report Preview"}),r.jsx("p",{className:"jsx-1d122cbc8249bf48 text-sm text-gray-500",children:"Press Ctrl+P or click Print to save as PDF"})]}),(0,r.jsxs)("button",{onClick:()=>window.print(),className:"jsx-1d122cbc8249bf48 px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium flex items-center gap-2",children:[r.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:"jsx-1d122cbc8249bf48 w-5 h-5",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z",className:"jsx-1d122cbc8249bf48"})}),"Print / Save as PDF"]})]}),(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 text-center mb-8 border-b pb-6",children:[r.jsx("h1",{className:"jsx-1d122cbc8249bf48 text-3xl font-bold text-gray-900 mb-2",children:e.settings.system_name}),r.jsx("h2",{className:"jsx-1d122cbc8249bf48 text-xl font-semibold text-gray-700 mb-4",children:"Sales Report"}),(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("p",{className:"jsx-1d122cbc8249bf48",children:[r.jsx("strong",{className:"jsx-1d122cbc8249bf48",children:"Generated:"})," ",new Date().toLocaleString()]}),e.cashierFilter&&(0,r.jsxs)("p",{className:"jsx-1d122cbc8249bf48",children:[r.jsx("strong",{className:"jsx-1d122cbc8249bf48",children:"Cashier:"})," ",e.cashierFilter.full_name]})]})]}),(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 grid grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 border border-gray-200 rounded-lg p-4 text-center",children:[(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 text-3xl font-bold text-green-600 mb-1",children:[s,e.stats.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsx("div",{className:"jsx-1d122cbc8249bf48 text-sm text-gray-600 font-medium",children:"Total Revenue"})]}),(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 border border-gray-200 rounded-lg p-4 text-center",children:[r.jsx("div",{className:"jsx-1d122cbc8249bf48 text-3xl font-bold text-indigo-600 mb-1",children:e.stats.totalTransactions}),r.jsx("div",{className:"jsx-1d122cbc8249bf48 text-sm text-gray-600 font-medium",children:"Total Transactions"})]}),(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 border border-gray-200 rounded-lg p-4 text-center",children:[(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 text-3xl font-bold text-blue-600 mb-1",children:[s,e.stats.avgTransaction.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsx("div",{className:"jsx-1d122cbc8249bf48 text-sm text-gray-600 font-medium",children:"Average Transaction"})]})]}),(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 mb-8",children:[r.jsx("h3",{className:"jsx-1d122cbc8249bf48 text-lg font-bold text-gray-800 mb-4",children:"Transaction Details"}),(0,r.jsxs)("table",{className:"jsx-1d122cbc8249bf48 w-full border-collapse border border-gray-300",children:[r.jsx("thead",{className:"jsx-1d122cbc8249bf48",children:(0,r.jsxs)("tr",{className:"jsx-1d122cbc8249bf48 bg-gray-100 border-b-2 border-gray-300",children:[r.jsx("th",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase",children:"Date"}),r.jsx("th",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase",children:"Invoice #"}),r.jsx("th",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase",children:"Customer"}),r.jsx("th",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase",children:"Cashier"}),r.jsx("th",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-3 text-left text-xs font-bold text-gray-700 uppercase",children:"Payment"}),r.jsx("th",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-3 text-right text-xs font-bold text-gray-700 uppercase",children:"Total"})]})}),(0,r.jsxs)("tbody",{className:"jsx-1d122cbc8249bf48",children:[e.sales.map((e,t)=>(0,r.jsxs)("tr",{className:"jsx-1d122cbc8249bf48 "+((t%2==0?"bg-white":"bg-gray-50")||""),children:[r.jsx("td",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-2 text-sm text-gray-700",children:new Date(e.sale_date).toLocaleString()}),r.jsx("td",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-2 text-sm font-medium text-gray-900",children:e.invoice_number}),r.jsx("td",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-2 text-sm text-gray-700",children:e.customer?e.customer.full_name:"Walk-in"}),r.jsx("td",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-2 text-sm text-gray-700",children:e.user.full_name}),r.jsx("td",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-2 text-sm text-gray-600",children:e.payment_method}),(0,r.jsxs)("td",{className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-2 text-sm text-right font-semibold text-gray-900",children:[s,Number(e.total_amount).toFixed(2)]})]},e.sale_id)),0===e.sales.length&&r.jsx("tr",{className:"jsx-1d122cbc8249bf48",children:r.jsx("td",{colSpan:6,className:"jsx-1d122cbc8249bf48 border border-gray-300 px-4 py-8 text-center text-gray-500",children:"No sales transactions found."})})]})]})]}),(0,r.jsxs)("div",{className:"jsx-1d122cbc8249bf48 text-center text-sm text-gray-500 border-t pt-6 mt-8",children:[(0,r.jsxs)("p",{className:"jsx-1d122cbc8249bf48",children:["This report was generated from ",e.settings.system_name]}),(0,r.jsxs)("p",{className:"jsx-1d122cbc8249bf48 text-xs mt-1",children:["Generated on ",new Date().toLocaleDateString()," at ",new Date().toLocaleTimeString()]})]})]})})]})}s(3729)},29408:()=>{},18630:(e,t,s)=>{s(29408);var r=s(3729),n=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(r);function a(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i="undefined"!=typeof process&&process.env&&!0,o=function(e){return"[object String]"===Object.prototype.toString.call(e)},c=function(){function e(e){var t=void 0===e?{}:e,s=t.name,r=void 0===s?"stylesheet":s,n=t.optimizeForSpeed,a=void 0===n?i:n;l(o(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",l("boolean"==typeof a,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=a,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){l("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),l(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;l(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){return l(o(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},s.replaceRule=function(e,t){this._optimizeForSpeed;var s=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(r){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}return e},s.deleteRule=function(e){this._serverSheet.deleteRule(e)},s.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},s.cssRules=function(){return this._serverSheet.cssRules},s.makeStyleTag=function(e,t,s){t&&l(o(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return s?n.insertBefore(r,s):n.appendChild(r),r},a(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),t&&a(e,t),e}();function l(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},x={};function u(e,t){if(!t)return"jsx-"+e;var s=String(t),r=e+s;return x[r]||(x[r]="jsx-"+d(e+"-"+s)),x[r]}function b(e,t){var s=e+(t=t.replace(/\/style/gi,"\\/style"));return x[s]||(x[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),x[s]}var m=r.createContext(null);m.displayName="StyleSheetContext",n.default.useInsertionEffect||n.default.useLayoutEffect;var p=void 0;function h(e){var t=p||r.useContext(m);return t&&t.add(e),null}h.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=h},47983:(e,t,s)=>{"use strict";e.exports=s(18630).style},38499:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(25036),n=s(53524);s(40002);let a=(0,s(86843).createProxy)(String.raw`C:\Users\mubar\Desktop\MADAR\app\reports\export\SalesExportClient.tsx`),{__esModule:i,$$typeof:o}=a,c=a.default,l=new n.PrismaClient;async function d(e){let t=e.userId?Number(e.userId):void 0,s={};t&&(s.user_id=t);let[r,n,a]=await Promise.all([l.sale.findMany({where:s,orderBy:{sale_date:"desc"},include:{user:{select:{full_name:!0}},customer:{select:{full_name:!0}},branch:{select:{branch_name:!0}},sale_items:{include:{product:{select:{name:!0}}}}}}),l.setting.findFirst(),t?l.user.findUnique({where:{user_id:t},select:{full_name:!0}}):null]),i=r.reduce((e,t)=>e+Number(t.total_amount),0),o=r.length;return{sales:r.map(e=>({...e,total_amount:e.total_amount.toString(),discount:e.discount.toString(),tax:e.tax.toString(),sale_items:e.sale_items.map(e=>({...e,unit_price:e.unit_price.toString(),subtotal:e.subtotal.toString()}))})),settings:n||{system_name:"MADAR POS",currency:"USD"},cashierFilter:a,stats:{totalRevenue:i,totalTransactions:o,avgTransaction:o>0?i/o:0}}}async function x({searchParams:e}){let t=await d(e);return r.jsx(c,{data:t})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,1747,8092],()=>s(3780));module.exports=r})();