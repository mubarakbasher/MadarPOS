(()=>{var e={};e.id=882,e.ids=[882],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},57730:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>o});var s=r(50482),i=r(69108),a=r(62563),l=r.n(a),n=r(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let o=["",{children:["reports",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,19669)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\reports\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,59515)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mubar\\Desktop\\MADAR\\app\\reports\\page.tsx"],x="/reports/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/reports/page",pathname:"/reports",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},86159:(e,t,r)=>{Promise.resolve().then(r.bind(r,89311))},89311:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var s=r(95344),i=r(3729),a=r.n(i),l=r(96885),n=r(48411),d=r(37121),o=r(73714),c=r(89895),x=r(28765),m=r(55794),p=r(18822);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,r(69224).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var h=r(53148),g=r(3283);function y(){let[e,t]=(0,i.useState)([]),[r,y]=(0,i.useState)([]),[j,v]=(0,i.useState)(null),[b,f]=(0,i.useState)(!0),[k,w]=(0,i.useState)(null),[_,S]=(0,i.useState)(""),[N,Z]=(0,i.useState)("all");(0,i.useEffect)(()=>{(async()=>{try{let e="all"===N?"/api/reports/sales":`/api/reports/sales?userId=${N}`,r=await fetch(e);if(r.ok){let e=await r.json();t(e)}let s=await fetch("/api/dashboard/stats");if(s.ok){let e=await s.json();v(e)}let i=await fetch("/api/users");if(i.ok){let e=await i.json();y(e)}}catch(e){console.error("Failed to load data",e)}finally{f(!1)}})()},[N]);let A=e=>{w(k===e?null:e)},z=e.filter(e=>e.invoice_number&&e.invoice_number.toLowerCase().includes(_.toLowerCase())||e.user.full_name.toLowerCase().includes(_.toLowerCase())||e.customer&&e.customer.full_name.toLowerCase().includes(_.toLowerCase())),C=z.reduce((e,t)=>e+t.total_amount,0),P=r.find(e=>e.user_id===Number(N));return(0,s.jsxs)("div",{style:{padding:"2rem"},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"h3 mb-1",children:"Sales Reports"}),s.jsx("p",{className:"text-muted",children:"View transaction history and revenue"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=new URLSearchParams;"all"!==N&&e.set("userId",N),window.open(`/reports/export?${e.toString()}`,"_blank")},className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[s.jsx(l.Z,{size:18}),"Export Report"]})]}),s.jsx("div",{className:"card mb-6",style:{padding:"1.5rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("label",{className:"text-sm font-bold",children:"Filter by Cashier:"}),(0,s.jsxs)("select",{value:N,onChange:e=>Z(e.target.value),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.9rem",minWidth:"200px"},children:[s.jsx("option",{value:"all",children:"All Cashiers"}),r.map(e=>s.jsx("option",{value:e.user_id,children:e.full_name},e.user_id))]}),P&&(0,s.jsxs)("div",{style:{marginLeft:"auto",textAlign:"right"},children:[(0,s.jsxs)("div",{className:"text-muted text-sm",children:["Total Sales by ",P.full_name]}),(0,s.jsxs)("div",{className:"text-2xl font-bold",style:{color:"var(--primary)"},children:["$",C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})}),j&&(0,s.jsxs)("div",{className:"grid gap-6 mb-8",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[s.jsx(g.Z,{title:"Total Revenue",value:`$${j.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2})}`,trend:j.monthRevenue&&j.totalRevenue?`+${(j.monthRevenue/j.totalRevenue*100).toFixed(1)}%`:"N/A",trendUp:!0,icon:s.jsx(n.Z,{size:24})}),s.jsx(g.Z,{title:"Total Transactions",value:j.totalSales.toString(),trend:j.todaySales&&j.totalSales?`+${(j.todaySales/j.totalSales*100).toFixed(1)}%`:"N/A",trendUp:!0,icon:s.jsx(d.Z,{size:24})}),s.jsx(g.Z,{title:"Avg. Transaction",value:j.totalSales>0?`$${(j.totalRevenue/j.totalSales).toFixed(2)}`:"$0.00",trend:"Per Order",trendUp:!0,icon:s.jsx(o.Z,{size:24})}),s.jsx(g.Z,{title:"Active Cashiers",value:r.length.toString(),trend:"Staff Members",trendUp:!0,icon:s.jsx(c.Z,{size:24})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Recent Transactions"}),(0,s.jsxs)("div",{style:{position:"relative",width:"300px"},children:[s.jsx(x.Z,{size:16,className:"text-muted",style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)"}}),s.jsx("input",{type:"text",placeholder:"Search invoice, cashier, or customer...",value:_,onChange:e=>S(e.target.value),style:{width:"100%",padding:"0.5rem 1rem 0.5rem 2.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.9rem"}})]})]}),(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{background:"var(--background)",color:"var(--foreground-secondary)",fontSize:"0.85rem",textAlign:"left"},children:(0,s.jsxs)("tr",{children:[s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Date"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Invoice #"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Customer"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Cashier"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Payment"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Total"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Details"})]})}),s.jsx("tbody",{style:{fontSize:"0.95rem"},children:b?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"p-4 text-center",children:"Loading sales history..."})}):0===z.length?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"p-4 text-center text-muted",children:"No transactions found"})}):z.map(e=>(0,s.jsxs)(a().Fragment,{children:[(0,s.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)",background:k===e.sale_id?"var(--surface-hover)":"transparent"},children:[s.jsx("td",{style:{padding:"1rem",color:"var(--muted)"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(m.Z,{size:14}),new Date(e.sale_date).toLocaleString()]})}),s.jsx("td",{style:{padding:"1rem",fontWeight:500},children:e.invoice_number||"N/A"}),s.jsx("td",{style:{padding:"1rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(p.Z,{size:14,className:"text-muted"}),e.customer?e.customer.full_name:"Walk-in"]})}),s.jsx("td",{style:{padding:"1rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(p.Z,{size:14,className:"text-muted"}),e.user.full_name]})}),s.jsx("td",{style:{padding:"1rem"},children:s.jsx("span",{style:{padding:"2px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"0.85rem"},children:e.payment_method})}),(0,s.jsxs)("td",{style:{padding:"1rem",fontWeight:"bold"},children:["$",e.total_amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsx("td",{style:{padding:"1rem"},children:s.jsx("button",{onClick:()=>A(e.sale_id),className:"btn btn-icon btn-sm",children:k===e.sale_id?s.jsx(u,{size:18}):s.jsx(h.Z,{size:18})})})]}),k===e.sale_id&&s.jsx("tr",{style:{background:"var(--surface-hover)"},children:s.jsx("td",{colSpan:7,style:{padding:"0 1rem 1rem 1rem"},children:(0,s.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)"},children:[s.jsx("h4",{className:"text-sm font-bold mb-2",children:"Order Summary"}),(0,s.jsxs)("table",{style:{width:"100%",fontSize:"0.9rem"},children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{style:{color:"var(--muted)"},children:[s.jsx("th",{style:{textAlign:"left",paddingBottom:"0.5rem"},children:"Product"}),s.jsx("th",{style:{textAlign:"right",paddingBottom:"0.5rem"},children:"Qty"}),s.jsx("th",{style:{textAlign:"right",paddingBottom:"0.5rem"},children:"Price"}),s.jsx("th",{style:{textAlign:"right",paddingBottom:"0.5rem"},children:"Subtotal"})]})}),s.jsx("tbody",{children:e.sale_items.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{style:{padding:"0.25rem 0"},children:e.product.name}),s.jsx("td",{style:{textAlign:"right",padding:"0.25rem 0"},children:e.quantity}),(0,s.jsxs)("td",{style:{textAlign:"right",padding:"0.25rem 0"},children:["$",e.unit_price.toFixed(2)]}),(0,s.jsxs)("td",{style:{textAlign:"right",padding:"0.25rem 0",fontWeight:500},children:["$",e.subtotal.toFixed(2)]})]},e.sale_item_id))})]})]})})})]},e.sale_id))})]})]})]})}},3283:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var s=r(95344),i=r(3729),a=r.n(i),l=r(46064);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(69224).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);function d({title:e,value:t,trend:r,trendUp:i,icon:d}){return(0,s.jsxs)("div",{className:"bg-white/70 backdrop-blur-md rounded-2xl border border-white/60 shadow-sm hover:shadow-xl transition-all duration-300 group overflow-hidden relative",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-10 p-6 pb-0",children:[s.jsx("div",{className:"p-3.5 bg-indigo-50/50 rounded-2xl text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:a().cloneElement(d,{size:24})}),r&&(0,s.jsxs)("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ${i?"bg-green-50 text-green-600":"bg-rose-50 text-rose-600"}`,children:[i?s.jsx(l.Z,{size:14}):s.jsx(n,{size:14}),r]})]}),(0,s.jsxs)("div",{className:"p-6 pt-2 relative z-10",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-1",children:e}),s.jsx("div",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:t})]}),s.jsx("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-indigo-500/5 rounded-full blur-3xl group-hover:bg-indigo-500/10 transition-colors"})]})}},55794:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},48411:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},96885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},53148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},28765:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},73714:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},46064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},18822:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},19669:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>l});let s=(0,r(86843).createProxy)(String.raw`C:\Users\mubar\Desktop\MADAR\app\reports\page.tsx`),{__esModule:i,$$typeof:a}=s,l=s.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,1747,8092],()=>r(57730));module.exports=s})();