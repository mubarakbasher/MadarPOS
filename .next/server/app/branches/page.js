(()=>{var e={};e.id=2230,e.ids=[2230],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6732:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=a(50482),r=a(69108),o=a(62563),n=a.n(o),i=a(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d=["",{children:["branches",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,67711)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\branches\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,59515)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mubar\\Desktop\\MADAR\\app\\branches\\page.tsx"],x="/branches/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/branches/page",pathname:"/branches",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},73421:(e,t,a)=>{Promise.resolve().then(a.bind(a,70192))},70192:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(95344),r=a(3729),o=a(51838),n=a(91917),i=a(28765),l=a(80508),d=a(40626),c=a(46327),x=a(38271),m=a(56506),p=a(8428),b=a(47983),h=a.n(b),u=a(14513);function f({isOpen:e,onClose:t,branch:a,onSuccess:o}){let[n,i]=(0,r.useState)(""),[l,d]=(0,r.useState)(""),[c,x]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[b,f]=(0,r.useState)("");(0,r.useEffect)(()=>{a&&e&&(i(a.branch_name),d(a.location||""),x(a.phone||""))},[a,e]);let j=async e=>{e.preventDefault(),f(""),p(!0);try{let e=await fetch(`/api/branches/${a?.branch_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_name:n,location:l||null,phone:c||null})}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to update branch");o(),t()}catch(e){f(e.message)}finally{p(!1)}};return e&&a?(0,s.jsxs)(s.Fragment,{children:[s.jsx(h(),{id:"23214182e0f186a5",children:".modal-overlay.jsx-23214182e0f186a5{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:9999;padding:1rem}.modal-content.jsx-23214182e0f186a5{background:white;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;-webkit-box-shadow:0 20px 60px rgba(0,0,0,.3);-moz-box-shadow:0 20px 60px rgba(0,0,0,.3);box-shadow:0 20px 60px rgba(0,0,0,.3);width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header.jsx-23214182e0f186a5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:1.5rem;border-bottom:1px solid#e5e7eb}.modal-title.jsx-23214182e0f186a5{font-size:1.25rem;font-weight:700;color:#111827;margin:0}.modal-close.jsx-23214182e0f186a5{background:none;border:none;cursor:pointer;padding:.5rem;color:#6b7280;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-close.jsx-23214182e0f186a5:hover{background:#f3f4f6;color:#111827}.modal-body.jsx-23214182e0f186a5{padding:1.5rem}.modal-footer.jsx-23214182e0f186a5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:.75rem;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:1.5rem;border-top:1px solid#e5e7eb;background:#f9fafb;-webkit-border-radius:0 0 12px 12px;-moz-border-radius:0 0 12px 12px;border-radius:0 0 12px 12px}.form-group.jsx-23214182e0f186a5{margin-bottom:1.25rem}.form-label.jsx-23214182e0f186a5{display:block;font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.form-input.jsx-23214182e0f186a5{width:100%;padding:.625rem .875rem;border:1px solid#d1d5db;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.9375rem;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.form-input.jsx-23214182e0f186a5:focus{outline:none;border-color:#6366f1;-webkit-box-shadow:0 0 0 3px rgba(99,102,241,.1);-moz-box-shadow:0 0 0 3px rgba(99,102,241,.1);box-shadow:0 0 0 3px rgba(99,102,241,.1)}.alert.jsx-23214182e0f186a5{padding:.875rem 1rem;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.875rem;margin-bottom:1rem}.alert-error.jsx-23214182e0f186a5{background:#fef2f2;color:#991b1b;border:1px solid#fecaca}"}),s.jsx("div",{className:"jsx-23214182e0f186a5 modal-overlay",children:(0,s.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-content",children:[(0,s.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-header",children:[s.jsx("h2",{className:"jsx-23214182e0f186a5 modal-title",children:"Edit Branch"}),s.jsx("button",{onClick:t,className:"jsx-23214182e0f186a5 modal-close",children:s.jsx(u.Z,{size:20})})]}),(0,s.jsxs)("form",{onSubmit:j,className:"jsx-23214182e0f186a5",children:[(0,s.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-body",children:[b&&s.jsx("div",{className:"jsx-23214182e0f186a5 alert alert-error",children:b}),(0,s.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[s.jsx("label",{className:"jsx-23214182e0f186a5 form-label",children:"Branch Name"}),s.jsx("input",{type:"text",value:n,onChange:e=>i(e.target.value),required:!0,className:"jsx-23214182e0f186a5 form-input"})]}),(0,s.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[s.jsx("label",{className:"jsx-23214182e0f186a5 form-label",children:"Location / Address"}),s.jsx("input",{type:"text",value:l,onChange:e=>d(e.target.value),placeholder:"Optional",className:"jsx-23214182e0f186a5 form-input"})]}),(0,s.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[s.jsx("label",{className:"jsx-23214182e0f186a5 form-label",children:"Phone Number"}),s.jsx("input",{type:"text",value:c,onChange:e=>x(e.target.value),placeholder:"Optional",className:"jsx-23214182e0f186a5 form-input"})]})]}),(0,s.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-footer",children:[s.jsx("button",{type:"button",onClick:t,disabled:m,className:"jsx-23214182e0f186a5 btn btn-secondary",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:m,className:"jsx-23214182e0f186a5 btn btn-primary",children:m?"Updating...":"Update Branch"})]})]})]})})]}):null}function j(){let[e,t]=(0,r.useState)([]),[a,b]=(0,r.useState)(!0),[h,u]=(0,r.useState)(""),[j,g]=(0,r.useState)(null),[y,k]=(0,r.useState)(!1);(0,p.useRouter)(),(0,r.useEffect)(()=>{v()},[]);let v=async()=>{try{let e=await fetch("/api/branches");if(e.ok){let a=await e.json();t(a)}}catch(e){console.error("Failed to fetch branches",e)}finally{b(!1)}},w=async e=>{if(confirm("Are you sure you want to delete this branch?"))try{let t=await fetch(`/api/branches/${e}`,{method:"DELETE"});if(t.ok)v();else{let e=await t.json();alert(e.error||"Failed to delete branch")}}catch(e){console.error("Failed to delete branch",e)}},N=e=>{g(e),k(!0)},z=e.filter(e=>e.branch_name.toLowerCase().includes(h.toLowerCase())||e.location&&e.location.toLowerCase().includes(h.toLowerCase()));return(0,s.jsxs)("div",{style:{padding:"2rem"},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"h3 mb-1",children:"Branch Management"}),s.jsx("p",{className:"text-muted",children:"Manage store locations and outlets"})]}),(0,s.jsxs)(m.default,{href:"/branches/add",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",fontSize:"0.9375rem",fontWeight:"500"},children:[s.jsx(o.Z,{size:18})," Add New Branch"]})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:[(0,s.jsxs)("h2",{className:"text-lg font-bold flex items-center gap-2",children:[s.jsx(n.Z,{size:20,className:"text-primary"}),"All Branches"]}),(0,s.jsxs)("div",{style:{position:"relative",width:"300px"},children:[s.jsx(i.Z,{size:16,className:"text-muted",style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)"}}),s.jsx("input",{type:"text",placeholder:"Search branches...",value:h,onChange:e=>u(e.target.value),style:{width:"100%",padding:"0.5rem 1rem 0.5rem 2.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.9rem"},className:"input"})]})]}),s.jsx("div",{style:{overflowX:"auto"},children:(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[s.jsx("thead",{style:{background:"var(--background)",color:"var(--text-muted)",fontSize:"0.85rem",textAlign:"left"},children:(0,s.jsxs)("tr",{children:[s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Branch Name"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Location"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Phone"}),s.jsx("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Actions"})]})}),s.jsx("tbody",{style:{fontSize:"0.95rem"},children:a?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-center",style:{padding:"2rem"},children:"Loading branches..."})}):0===z.length?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"p-4 text-center text-muted",style:{padding:"2rem"},children:"No branches found"})}):z.map(e=>(0,s.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,s.jsxs)("td",{style:{padding:"1rem"},children:[s.jsx("div",{className:"font-bold",children:e.branch_name}),(0,s.jsxs)("div",{className:"text-xs text-muted",children:["ID: ",e.branch_id]})]}),s.jsx("td",{style:{padding:"1rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(l.Z,{size:14,className:"text-muted"}),e.location||"-"]})}),s.jsx("td",{style:{padding:"1rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(d.Z,{size:14,className:"text-muted"}),e.phone||"-"]})}),s.jsx("td",{style:{padding:"1rem"},children:(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>N(e),className:"btn btn-icon btn-sm",title:"Edit Branch",children:s.jsx(c.Z,{size:16})}),s.jsx("button",{className:"text-muted hover:text-danger p-1 transition-colors",onClick:()=>w(e.branch_id),title:"Delete",children:s.jsx(x.Z,{size:16})})]})})]},e.branch_id))})]})})]}),s.jsx(f,{isOpen:y,onClose:()=>k(!1),branch:j,onSuccess:()=>{v()}})]})}},51838:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},28765:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},46327:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},38271:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},67711:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>o,__esModule:()=>r,default:()=>n});let s=(0,a(86843).createProxy)(String.raw`C:\Users\mubar\Desktop\MADAR\app\branches\page.tsx`),{__esModule:r,$$typeof:o}=s,n=s.default}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[1638,1747,5843,8092],()=>a(6732));module.exports=s})();