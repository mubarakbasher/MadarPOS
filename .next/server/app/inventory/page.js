(()=>{var e={};e.id=1268,e.ids=[1268],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18537:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>g,tree:()=>d});var s=r(50482),a=r(69108),i=r(62563),o=r.n(i),n=r(68300),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d=["",{children:["inventory",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,27912)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\inventory\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,59515)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mubar\\Desktop\\MADAR\\app\\inventory\\page.tsx"],x="/inventory/page",u={require:r,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/inventory/page",pathname:"/inventory",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},95892:(e,t,r)=>{Promise.resolve().then(r.bind(r,70365))},70365:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(95344),a=r(3729),i=r(91917),o=r(69224);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,o.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var l=r(46064),d=r(28765);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,o.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),x=(0,o.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),u=(0,o.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var g=r(56506),m=r(14513),p=r(94530),h=r(31498),b=r(8428);function y({isOpen:e,onClose:t,product:r}){let i=(0,b.useRouter)(),[o,n]=(0,a.useState)(!1),[l,d]=(0,a.useState)(""),[c,x]=(0,a.useState)("correction"),[u,g]=(0,a.useState)("");if(!e||!r)return null;let y=async e=>{e.preventDefault(),n(!0);try{let e=await fetch("/api/inventory/adjust",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:r.id,branchId:r.branchId,physicalQuantity:parseInt(l),reason:c,notes:u})});if(!e.ok){let t=await e.json();throw Error(t.message||"Adjustment failed")}t(),i.refresh()}catch(e){alert(e.message)}finally{n(!1)}};return s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-xl border border-white/20 shadow-2xl rounded-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Adjust Stock"}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-all duration-200",children:s.jsx(m.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 p-4 bg-indigo-50/50 text-indigo-700 rounded-xl border border-indigo-100 text-sm flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-indigo-900",children:"Product:"}),s.jsx("span",{children:r.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[s.jsx("span",{className:"font-semibold text-indigo-900",children:"Current System Stock:"}),s.jsx("span",{className:"font-mono font-bold",children:r.currentStock})]})]}),(0,s.jsxs)("form",{onSubmit:y,className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 animate-in slide-in-from-bottom-2 duration-300 delay-100",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500",children:"New Physical Quantity"}),s.jsx("input",{type:"number",required:!0,className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-700 font-bold text-lg",placeholder:"e.g. 18",value:l,onChange:e=>d(e.target.value)}),s.jsx("p",{className:"text-xs text-gray-400",children:"Enter the actual count found on shelf."})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 animate-in slide-in-from-bottom-2 duration-300 delay-200",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500",children:"Reason"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-700 appearance-none cursor-pointer",value:c,onChange:e=>x(e.target.value),children:[s.jsx("option",{value:"correction",children:"Correction / Audit"}),s.jsx("option",{value:"damage",children:"Damaged Goods"}),s.jsx("option",{value:"theft",children:"Theft / Loss"}),s.jsx("option",{value:"return",children:"Customer Return (Restock)"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 animate-in slide-in-from-bottom-2 duration-300 delay-300",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500",children:"Notes (Optional)"}),s.jsx("textarea",{className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-700 resize-none",rows:2,placeholder:"Add any additional details...",value:u,onChange:e=>g(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t border-gray-100 animate-in slide-in-from-bottom-2 duration-300 delay-400",children:[s.jsx("button",{type:"button",onClick:t,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-gray-600 font-medium hover:bg-gray-50 hover:text-gray-900 transition-all duration-200",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:o,className:"px-6 py-2.5 rounded-xl bg-indigo-600 text-white font-medium hover:bg-indigo-700 hover:shadow-lg hover:shadow-indigo-500/30 transition-all duration-200 flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[o?s.jsx(p.Z,{size:18,className:"animate-spin"}):s.jsx(h.Z,{size:18}),"Confirm Adjustment"]})]})]})]})]})})}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,o.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function v({isOpen:e,onClose:t,product:r,onSuccess:i}){let[o,n]=(0,a.useState)(!1),[l,d]=(0,a.useState)(!1),[c,x]=(0,a.useState)([]),[u,g]=(0,a.useState)([]),[b,y]=(0,a.useState)(!1),[v,j]=(0,a.useState)({name:"",sku:"",categoryId:"",costPrice:"",sellingPrice:"",reorderLevel:""});(0,a.useEffect)(()=>{e&&(fetch("/api/categories").then(e=>e.json()).then(e=>x(e)).catch(e=>console.error("Failed to load categories",e)),r&&(y(!0),fetch(`/api/products/${r.id}/inventory`).then(e=>e.json()).then(e=>g(e)).catch(e=>console.error("Failed to load branch inventory",e)).finally(()=>y(!1))),r&&j({name:r.name,sku:r.sku,categoryId:String(r.categoryId),costPrice:String(r.costPrice),sellingPrice:String(r.sellingPrice),reorderLevel:String(r.reorderLevel)}))},[e,r]);let N=async e=>{if(e.preventDefault(),r){n(!0);try{if(!(await fetch(`/api/products/${r.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok)throw Error("Failed to update product");i(),t()}catch(e){console.error(e),alert("Failed to update product")}finally{n(!1)}}},w=async()=>{if(r&&confirm("Are you sure you want to delete this product? This action cannot be undone.")){d(!0);try{let e=await fetch(`/api/products/${r.id}`,{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to delete product")}i(),t()}catch(e){console.error(e),alert(e.message)}finally{d(!1)}}};return e?s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-xl border border-white/20 shadow-2xl rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto overflow-x-hidden animate-in zoom-in-95 duration-200",style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[(0,s.jsxs)("div",{className:"relative px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-indigo-50/30 to-white",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600",children:"Edit Product"}),s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Update product details and inventory settings"})]}),s.jsx("button",{onClick:t,className:"p-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-all duration-200",children:s.jsx(m.Z,{size:18})})]}),(0,s.jsxs)("form",{onSubmit:N,className:"p-6 flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"group",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"Product Name"}),s.jsx("input",{type:"text",placeholder:"e.g. Premium Wireless Mouse",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 outline-none text-gray-700 font-medium placeholder:text-gray-400",value:v.name,onChange:e=>j({...v,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,s.jsxs)("div",{className:"group",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"SKU / Code"}),s.jsx("input",{type:"text",placeholder:"PROD-001",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 outline-none text-gray-700 font-mono text-sm",value:v.sku,onChange:e=>j({...v,sku:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"group",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"Category"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 outline-none text-gray-700 appearance-none cursor-pointer",value:v.categoryId,onChange:e=>j({...v,categoryId:e.target.value}),required:!0,children:[s.jsx("option",{value:"",children:"Select Category"}),c.map(e=>s.jsx("option",{value:e.category_id,children:e.category_name},e.category_id))]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:s.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s.jsx("path",{d:"m6 9 6 6 6-6"})})})]})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50/50 rounded-xl border border-gray-100 grid grid-cols-2 gap-5",children:[(0,s.jsxs)("div",{className:"group",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-green-600 transition-colors",children:"Cost Price"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:"$"}),s.jsx("input",{type:"number",step:"0.01",className:"w-full pl-7 pr-4 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all outline-none text-gray-700 font-medium",value:v.costPrice,onChange:e=>j({...v,costPrice:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"group",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"Selling Price"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:"$"}),s.jsx("input",{type:"number",step:"0.01",className:"w-full pl-7 pr-4 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-900 font-bold",value:v.sellingPrice,onChange:e=>j({...v,sellingPrice:e.target.value}),required:!0})]})]})]}),(0,s.jsxs)("div",{className:"group",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2.5 block",children:"Stock by Branch"}),b?s.jsx("div",{className:"flex items-center justify-center p-8 bg-gray-50/50 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[s.jsx("div",{className:"w-5 h-5 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{className:"text-sm font-medium",children:"Loading branch inventory..."})]})}):u.length>0?s.jsx("div",{className:"space-y-2",children:u.map(e=>s.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-50/30 rounded-xl border border-gray-100 hover:border-indigo-200 transition-all duration-200 hover:shadow-sm",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("div",{className:"font-bold text-gray-900 text-sm mb-0.5",children:e.branchName}),e.location&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCCD ",e.location]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("div",{className:`text-2xl font-bold ${e.isLowStock?"text-rose-600":"text-gray-900"}`,children:e.quantity}),s.jsx("div",{className:"text-xs text-gray-400 font-medium",children:"units"})]}),e.isLowStock&&s.jsx("div",{className:"px-2.5 py-1 rounded-lg bg-rose-50 border border-rose-200",children:s.jsx("span",{className:"text-xs font-bold text-rose-600",children:"Low"})})]})]})},e.branchId))}):s.jsx("div",{className:"p-6 bg-gray-50/50 rounded-xl border border-gray-100 text-center",children:s.jsx("div",{className:"text-sm text-gray-500",children:"No inventory data available for this product"})})]}),(0,s.jsxs)("div",{className:"group",children:[s.jsx("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-orange-500 transition-colors",children:"Low Stock Alert Level"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"number",className:"w-24 px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all outline-none text-gray-700 font-medium",value:v.reorderLevel,onChange:e=>j({...v,reorderLevel:e.target.value}),required:!0}),s.jsx("span",{className:"text-xs text-gray-400",children:"System will alert when stock falls below this quantity."})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-100",children:[(0,s.jsxs)("button",{type:"button",onClick:w,disabled:o||l,className:"px-4 py-2.5 rounded-xl border border-red-100 text-red-600 font-medium hover:bg-red-50 transition-all duration-200 flex items-center gap-2",children:[l?s.jsx(p.Z,{size:18,className:"animate-spin"}):s.jsx(f,{size:18}),"Delete Product"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx("button",{type:"button",onClick:t,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-gray-600 font-medium hover:bg-gray-50 hover:text-gray-900 transition-all duration-200",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:o,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium hover:shadow-lg hover:shadow-blue-500/30 hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-70 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2",children:[o?s.jsx(p.Z,{size:18,className:"animate-spin"}):s.jsx(h.Z,{size:18}),"Save Changes"]})]})]})]})]})}):null}var j=r(43070);function N({stockItems:e,categories:t,pagination:r}){let o=(0,b.useRouter)(),m=(0,b.useSearchParams)(),[p,h]=(0,a.useState)(null),[f,N]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[S,P]=(0,a.useState)(null),[C,_]=(0,a.useState)(m.get("search")||"");(0,a.useEffect)(()=>{let e=setTimeout(()=>{C!==(m.get("search")||"")&&L("search",C)},500);return()=>clearTimeout(e)},[C]);let q=r.totalItems,z=e.filter(e=>e.quantity<=e.reorder_level).length,A=e=>Number(e.product.cost_price),Z=e.reduce((e,t)=>e+A(t)*t.quantity,0),L=(e,t)=>{let r=new URLSearchParams(m.toString());t?r.set(e,t):r.delete(e),"page"!==e&&r.set("page","1"),o.push(`?${r.toString()}`)},D=e=>{h({id:e.product.product_id,name:e.product.name,currentStock:e.quantity,branchId:e.branch_id}),N(!0)},M=e=>{P({id:e.product.product_id,name:e.product.name,sku:e.product.sku,categoryId:e.product.category_id,costPrice:Number(e.product.cost_price),sellingPrice:Number(e.product.selling_price),reorderLevel:e.reorder_level}),k(!0)};return(0,s.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50/30 overflow-hidden relative",children:[s.jsx("div",{className:"absolute top-0 left-0 w-full h-96 bg-gradient-to-b from-indigo-50/50 to-transparent -z-10"}),s.jsx(j.default,{title:"Inventory Management"}),s.jsx("div",{className:"flex-1 overflow-auto p-8 pt-6",children:(0,s.jsxs)("div",{className:"max-w-[1600px] mx-auto animate-in fade-in slide-in-from-bottom-4 duration-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Overview"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Manage your products and stock levels"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>{let e=new URLSearchParams(m.toString());e.delete("page"),window.open(`/inventory/export?${e.toString()}`,"_blank")},className:"px-5 py-2.5 bg-white border border-gray-200/60 rounded-xl text-gray-600 font-medium hover:bg-gray-50 hover:text-gray-900 transition-all shadow-sm hover:shadow-md flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:"\uD83D\uDCCA"})," Export Report"]}),(0,s.jsxs)(g.default,{href:"/inventory/add",className:"group px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl font-medium hover:shadow-lg hover:shadow-indigo-500/30 transition-all flex items-center gap-2 transform hover:-translate-y-0.5",children:[s.jsx(i.Z,{size:18,className:"group-hover:rotate-12 transition-transform"}),"Add Product"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/70 backdrop-blur-md p-6 rounded-2xl border border-white/50 shadow-sm hover:shadow-xl transition-all duration-300 group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3.5 bg-indigo-50 rounded-2xl text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:s.jsx(i.Z,{size:24})}),s.jsx("span",{className:"text-xs font-bold uppercase text-indigo-600 bg-indigo-50/50 px-3 py-1 rounded-full tracking-wide",children:"Total"})]}),s.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-1 tracking-tight",children:q}),s.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Total products found"})]}),(0,s.jsxs)("div",{className:"bg-white/70 backdrop-blur-md p-6 rounded-2xl border border-white/50 shadow-sm hover:shadow-xl transition-all duration-300 group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[s.jsx("div",{className:"p-3.5 bg-rose-50 rounded-2xl text-rose-600 group-hover:scale-110 transition-transform duration-300",children:s.jsx(n,{size:24})}),s.jsx("span",{className:"text-xs font-bold uppercase text-rose-600 bg-rose-50/50 px-3 py-1 rounded-full tracking-wide",children:"Alert"})]}),s.jsx("div",{className:"text-4xl font-bold text-gray-900 mb-1 tracking-tight",children:z}),s.jsx("div",{className:"text-sm text-gray-500 font-medium",children:"Low stock on this page"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 p-6 rounded-2xl shadow-lg hover:shadow-indigo-500/30 transition-all duration-300 text-white relative overflow-hidden group",children:[s.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl group-hover:bg-white/20 transition-all"}),(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[s.jsx("div",{className:"p-3.5 bg-white/20 backdrop-blur-sm rounded-2xl text-white",children:s.jsx(l.Z,{size:24})}),s.jsx("span",{className:"text-xs font-bold uppercase text-white/90 bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full tracking-wide",children:"Value"})]}),(0,s.jsxs)("div",{className:"text-4xl font-bold mb-1 tracking-tight relative z-10",children:["$",Z.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),s.jsx("div",{className:"text-sm text-indigo-100 font-medium relative z-10",children:"Visible inventory value"})]})]}),(0,s.jsxs)("div",{className:"bg-white/50 backdrop-blur-md rounded-2xl border border-white/60 shadow-sm mb-6 p-4 flex gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md group",children:[s.jsx(d.Z,{size:20,className:"text-gray-400 absolute left-3.5 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),s.jsx("input",{type:"text",placeholder:"Search by name, SKU...",value:C,onChange:e=>_(e.target.value),className:"w-full pl-11 pr-4 py-2.5 bg-white/80 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-sm font-medium"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 border-l border-gray-200/50 pl-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(c,{size:18,className:"text-gray-500"}),s.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Filter:"})]}),(0,s.jsxs)("select",{value:m.get("category")||"all",onChange:e=>L("category","all"===e.target.value?null:e.target.value),className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm text-gray-700 font-medium focus:ring-2 focus:ring-indigo-100 outline-none cursor-pointer hover:border-indigo-300 transition-colors",children:[s.jsx("option",{value:"all",children:"All Categories"}),t.map(e=>s.jsx("option",{value:e.category_id,children:e.category_name},e.category_id))]})]})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/60 shadow-lg shadow-gray-200/50 overflow-hidden flex flex-col min-h-[500px]",children:[s.jsx("div",{className:"overflow-auto flex-1",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[s.jsx("thead",{className:"bg-gray-50/90 backdrop-blur-sm border-b border-gray-100",children:(0,s.jsxs)("tr",{className:"text-xs font-bold uppercase tracking-wider text-gray-500",children:[s.jsx("th",{className:"px-6 py-5",children:"Product Details"}),s.jsx("th",{className:"px-6 py-5",children:"SKU"}),s.jsx("th",{className:"px-6 py-5",children:"Category"}),s.jsx("th",{className:"px-6 py-5",children:"Stock Level"}),s.jsx("th",{className:"px-6 py-5",children:"Status"}),s.jsx("th",{className:"px-6 py-5 text-right",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"text-sm divide-y divide-gray-100",children:[e.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-indigo-50/40 transition-colors group",children:[s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center text-gray-400 font-bold text-lg",children:e.product.name.charAt(0)}),s.jsx("div",{children:s.jsx("div",{className:"font-bold text-gray-900 text-base",children:e.product.name})})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"font-mono text-gray-500 text-xs bg-gray-100 px-2.5 py-1 rounded-md border border-gray-200",children:e.product.sku})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-gray-600 font-medium",children:e.product.category.category_name})}),s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`font-bold text-lg ${e.quantity<=e.reorder_level?"text-rose-600":"text-gray-700"}`,children:e.quantity}),s.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"units"})]})}),s.jsx("td",{className:"px-6 py-4",children:e.quantity<=e.reorder_level?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-rose-50 text-rose-600 border border-rose-100",children:[s.jsx(n,{size:14,className:"fill-rose-600/20"})," Low Stock"]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-green-50 text-green-600 border border-green-100",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," In Stock"]})}),s.jsx("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2 opacity-50 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>D(e),className:"px-4 py-2 rounded-lg border border-gray-200 text-gray-600 text-xs font-bold hover:bg-gray-50 hover:border-gray-300 transition-all",children:"Adjust"}),s.jsx("button",{onClick:()=>M(e),className:"px-4 py-2 rounded-lg bg-gray-900 text-white text-xs font-bold hover:bg-black hover:shadow-lg hover:-translate-y-0.5 transition-all",children:"Edit"})]})})]},e.inventory_id)),0===e.length&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-16 text-center text-gray-500",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center",children:s.jsx(i.Z,{size:32,className:"text-gray-300"})}),s.jsx("p",{className:"font-medium text-lg text-gray-600",children:"No products found"}),s.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your filters"})]})})})]})]})}),(0,s.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm border-t border-gray-100 p-4 flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 font-medium",children:["Showing page ",r.currentPage," of ",r.totalPages]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{disabled:r.currentPage<=1,onClick:()=>L("page",String(r.currentPage-1)),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-600 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 transition-all",children:[s.jsx(x,{size:16})," Previous"]}),(0,s.jsxs)("button",{disabled:r.currentPage>=r.totalPages,onClick:()=>L("page",String(r.currentPage+1)),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-600 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 transition-all",children:["Next ",s.jsx(u,{size:16})]})]})]})]})]})}),s.jsx(y,{isOpen:f,onClose:()=>N(!1),product:p}),s.jsx(v,{isOpen:w,onClose:()=>k(!1),product:S,onSuccess:()=>{o.refresh()}})]})}},43070:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(95344),a=r(28765);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r(69224).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);var o=r(3729);function n({title:e}){let[t,r]=(0,o.useState)(null),[n,l]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();r(t)}}catch(e){console.error("Failed to fetch user info",e)}finally{l(!1)}})()},[]),(0,s.jsxs)("header",{className:"flex items-center justify-between h-20 px-8 mb-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:e}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[s.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),n?"...":`Welcome back, ${t?t.full_name:"Guest"}`]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsxs)("div",{className:"relative group",children:[s.jsx(a.Z,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-600 transition-colors"}),s.jsx("input",{type:"text",placeholder:"Quick search...",className:"w-[320px] pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 transition-all outline-none font-medium text-sm shadow-sm"})]}),s.jsx("div",{className:"h-8 w-[1px] bg-gray-200"}),(0,s.jsxs)("button",{className:"p-2.5 rounded-full bg-white border border-gray-200 text-gray-500 hover:text-indigo-600 hover:border-indigo-100 hover:bg-indigo-50 transition-all shadow-sm relative",children:[s.jsx(i,{size:20}),s.jsx("span",{className:"absolute top-0 right-0 w-3 h-3 bg-rose-500 border-2 border-white rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 pl-2",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600 to-violet-600 text-white flex items-center justify-center font-bold shadow-lg shadow-indigo-200",children:n?"...":t?t.full_name.charAt(0).toUpperCase():"?"}),n?s.jsx("div",{className:"h-8 w-24 bg-gray-100 rounded animate-pulse"}):(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-sm font-bold text-gray-800 leading-tight",children:t?t.full_name:"Guest"}),s.jsx("span",{className:"text-xs text-gray-500 font-medium",children:t?t.role:"Visitor"})]})]})]})]})}},94530:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},31498:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},28765:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},46064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(69224).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},27912:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,dynamic:()=>c});var s=r(25036),a=r(53524);r(40002);let i=(0,r(86843).createProxy)(String.raw`C:\Users\mubar\Desktop\MADAR\app\inventory\InventoryPageClient.tsx`),{__esModule:o,$$typeof:n}=i,l=i.default,d=new a.PrismaClient,c="force-dynamic";async function x(e){let t=Number(e.page)||1,r=e.search||"",s=e.category&&"all"!==e.category?Number(e.category):void 0,a={branch_id:1,product:{AND:[r?{OR:[{name:{contains:r}},{sku:{contains:r}}]}:{},s?{category_id:s}:{}]}},[i,o,n]=await Promise.all([d.inventory.findMany({where:a,include:{product:{include:{category:!0}}},orderBy:{product_id:"desc"},skip:(t-1)*15,take:15}),d.inventory.count({where:a}),d.category.findMany({orderBy:{category_name:"asc"}})]);return{items:i.map(e=>({...e,product:{...e.product,cost_price:e.product.cost_price.toString(),selling_price:e.product.selling_price.toString()}})),categories:n,pagination:{totalItems:o,totalPages:Math.ceil(o/15),currentPage:t,limit:15}}}async function u({searchParams:e}){let t=await x(e);return s.jsx(l,{stockItems:t.items,categories:t.categories,pagination:t.pagination})}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,1747,8092],()=>r(18537));module.exports=s})();