(()=>{var e={};e.id=6631,e.ids=[6631],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8320:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var r=s(50482),a=s(69108),n=s(62563),i=s.n(n),d=s(68300),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o=["",{children:["inventory",{children:["transfers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,31554)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\inventory\\transfers\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,59515)),"C:\\Users\\mubar\\Desktop\\MADAR\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\mubar\\Desktop\\MADAR\\app\\inventory\\transfers\\page.tsx"],u="/inventory/transfers/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/inventory/transfers/page",pathname:"/inventory/transfers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},88895:(e,t,s)=>{Promise.resolve().then(s.bind(s,21985))},21985:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(95344),a=s(3729),n=s(56506),i=s(63024),d=s(91917),l=s(35299),o=s(51838),c=s(38271),u=s(66138),x=s(31498),p=s(8428);function m(){let e=(0,p.useRouter)(),[t,s]=(0,a.useState)([]),[m,h]=(0,a.useState)([]),[y,g]=(0,a.useState)(""),[f,b]=(0,a.useState)(""),[v,j]=(0,a.useState)([]),[k,N]=(0,a.useState)(""),[_,S]=(0,a.useState)(1),[A,P]=(0,a.useState)(null),[w,q]=(0,a.useState)(!1),[Z,I]=(0,a.useState)(""),[M,C]=(0,a.useState)("");(0,a.useEffect)(()=>{z(),T()},[]),(0,a.useEffect)(()=>{k&&y?D(k,y):P(null)},[k,y]);let z=async()=>{let e=await fetch("/api/branches");e.ok&&s(await e.json())},T=async()=>{let e=await fetch("/api/products?search=");e.ok&&h(await e.json())},D=async(e,t)=>{let s=await fetch(`/api/inventory?productId=${e}&branchId=${t}`);if(s.ok){let e=await s.json();P(void 0!==e.quantity?e.quantity:0)}else P(0)},R=e=>{let t=[...v];t.splice(e,1),j(t)},B=async()=>{if(!y||!f){I("Please select both source and destination branches");return}if(y===f){I("Source and destination branches must be different");return}if(0===v.length){I("Please add at least one item to transfer");return}q(!0),I("");try{let t={fromBranchId:parseInt(y),toBranchId:parseInt(f),items:v.map(e=>({productId:e.productId,quantity:e.quantity})),userId:1},s=await fetch("/api/inventory/transfer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(s.ok)C("Transfer completed successfully!"),setTimeout(()=>{e.push("/inventory")},2e3);else{let e=await s.json();I(e.error||"Transfer failed")}}catch(e){console.error(e),I("An error occurred during transfer")}finally{q(!1)}};return(0,r.jsxs)("div",{style:{padding:"2rem",maxWidth:"1000px",margin:"0 auto"},children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)(n.default,{href:"/inventory",className:"text-muted hover:text-primary flex items-center gap-2 mb-2 text-sm transition-colors",children:[r.jsx(i.Z,{size:16})," Back to Inventory"]}),r.jsx("h1",{className:"h3",children:"Inter-Branch Transfer"}),r.jsx("p",{className:"text-muted",children:"Move stock between branches"})]}),(0,r.jsxs)("div",{className:"grid gap-6",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(d.Z,{size:20,className:"text-primary"}),"Transfer Details"]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-8 items-center",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx("label",{className:"text-sm font-bold text-muted",children:"From Branch (Source)"}),(0,r.jsxs)("select",{className:"input",style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)"},value:y,onChange:e=>{g(e.target.value),j([])},children:[r.jsx("option",{value:"",children:"Select Source Branch"}),t.map(e=>r.jsx("option",{value:e.branch_id,children:e.branch_name},e.branch_id))]})]}),r.jsx("div",{className:"flex justify-center",children:r.jsx(l.Z,{className:"text-muted",size:24})}),(0,r.jsxs)("div",{className:"grid gap-2",children:[r.jsx("label",{className:"text-sm font-bold text-muted",children:"To Branch (Destination)"}),(0,r.jsxs)("select",{className:"input",style:{width:"100%",padding:"0.75rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)"},value:f,onChange:e=>b(e.target.value),children:[r.jsx("option",{value:"",children:"Select Destination Branch"}),t.map(e=>r.jsx("option",{value:e.branch_id,disabled:e.branch_id.toString()===y,children:e.branch_name},e.branch_id))]})]})]})]}),y&&(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-lg font-bold mb-4",children:"Add Items"}),(0,r.jsxs)("div",{className:"flex gap-4 items-end mb-6 p-4 rounded-lg",style:{background:"var(--surface-hover)"},children:[(0,r.jsxs)("div",{className:"flex-1 grid gap-2",children:[r.jsx("label",{className:"text-sm font-bold text-muted",children:"Product"}),(0,r.jsxs)("select",{className:"input",style:{padding:"0.6rem",border:"1px solid var(--border)",borderRadius:"var(--radius-sm)"},value:k,onChange:e=>N(e.target.value),children:[r.jsx("option",{value:"",children:"Select Product"}),m.map(e=>(0,r.jsxs)("option",{value:e.product_id,children:[e.name," (",e.sku,")"]},e.product_id))]})]}),(0,r.jsxs)("div",{className:"w-32 grid gap-2",children:[r.jsx("label",{className:"text-sm font-bold text-muted",children:"Quantity"}),r.jsx("input",{type:"number",className:"input",style:{padding:"0.6rem",border:"1px solid var(--border)",borderRadius:"var(--radius-sm)",width:"100%"},min:"1",value:_,onChange:e=>S(parseInt(e.target.value))})]}),(0,r.jsxs)("div",{className:"w-32 grid gap-2",children:[r.jsx("label",{className:"text-sm font-bold text-muted",children:"Stock"}),r.jsx("div",{className:"text-sm font-medium",style:{padding:"0.6rem",color:0===A?"var(--danger)":"var(--text-main)"},children:null!==A?`${A} Avail.`:"-"})]}),(0,r.jsxs)("button",{className:"btn btn-secondary",onClick:()=>{if(!k||!_||!A||_<=0)return;if(_>A){alert(`Insufficient stock. Max available: ${A}`);return}if(v.find(e=>e.productId===parseInt(k))){alert("Item already added to transfer list");return}let e=m.find(e=>e.product_id===parseInt(k));e&&(j([...v,{productId:e.product_id,productName:e.name,quantity:_,maxStock:A}]),N(""),S(1),P(null))},disabled:!k||!A||_<=0||_>A,children:[r.jsx(o.Z,{size:18})," Add"]})]}),v.length>0?(0,r.jsxs)("table",{style:{width:"100%"},children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{children:[r.jsx("th",{style:{textAlign:"left",padding:"0.5rem",fontSize:"0.85rem"},children:"Product"}),r.jsx("th",{style:{textAlign:"left",padding:"0.5rem",fontSize:"0.85rem"},children:"Quantity"}),r.jsx("th",{style:{textAlign:"right",padding:"0.5rem",fontSize:"0.85rem"},children:"Action"})]})}),r.jsx("tbody",{children:v.map((e,t)=>(0,r.jsxs)("tr",{style:{borderTop:"1px solid var(--border)"},children:[r.jsx("td",{style:{padding:"0.75rem"},children:e.productName}),r.jsx("td",{style:{padding:"0.75rem"},children:e.quantity}),r.jsx("td",{style:{padding:"0.75rem",textAlign:"right"},children:r.jsx("button",{onClick:()=>R(t),className:"text-danger hover:text-danger-dark",children:r.jsx(c.Z,{size:16})})})]},t))})]}):r.jsx("div",{className:"text-center text-muted text-sm py-4",children:"No items added yet"})]}),Z&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-4 text-danger bg-red-50 rounded-lg border border-red-100",style:{background:"rgba(239, 68, 68, 0.1)"},children:[r.jsx(u.Z,{size:20}),Z]}),M&&(0,r.jsxs)("div",{className:"flex items-center gap-2 p-4 text-success bg-green-50 rounded-lg border border-green-100",style:{background:"rgba(16, 185, 129, 0.1)"},children:[r.jsx(u.Z,{size:20}),M]}),(0,r.jsxs)("div",{className:"flex justify-end gap-3",children:[r.jsx(n.default,{href:"/inventory",className:"btn btn-ghost",children:"Cancel"}),r.jsx("button",{className:"btn btn-primary",onClick:B,disabled:w||0===v.length,children:w?"Processing...":(0,r.jsxs)(r.Fragment,{children:[r.jsx(x.Z,{size:18})," Confirm Transfer"]})})]})]})]})}},66138:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},63024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35299:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},51838:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},31498:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},38271:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},31554:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>i});let r=(0,s(86843).createProxy)(String.raw`C:\Users\mubar\Desktop\MADAR\app\inventory\transfers\page.tsx`),{__esModule:a,$$typeof:n}=r,i=r.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[1638,1747,8092],()=>s(8320));module.exports=r})();