(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[882],{51625:function(e,t,r){Promise.resolve().then(r.bind(r,6540))},6540:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var s=r(3827),i=r(64090),n=r(44715),l=r(48219),a=r(69475),d=r(92600),o=r(34059),c=r(28670),u=r(97307),m=r(11213);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,r(87461).Z)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var h=r(37841),p=r(93801);function y(){let[e,t]=(0,i.useState)([]),[r,y]=(0,i.useState)([]),[g,v]=(0,i.useState)(null),[j,f]=(0,i.useState)(!0),[b,k]=(0,i.useState)(null),[w,Z]=(0,i.useState)(""),[N,S]=(0,i.useState)("all");(0,i.useEffect)(()=>{(async()=>{try{let e="all"===N?"/api/reports/sales":"/api/reports/sales?userId=".concat(N),r=await fetch(e);if(r.ok){let e=await r.json();t(e)}let s=await fetch("/api/dashboard/stats");if(s.ok){let e=await s.json();v(e)}let i=await fetch("/api/users");if(i.ok){let e=await i.json();y(e)}}catch(e){console.error("Failed to load data",e)}finally{f(!1)}})()},[N]);let _=e=>{k(b===e?null:e)},z=e.filter(e=>e.invoice_number&&e.invoice_number.toLowerCase().includes(w.toLowerCase())||e.user.full_name.toLowerCase().includes(w.toLowerCase())||e.customer&&e.customer.full_name.toLowerCase().includes(w.toLowerCase())),C=z.reduce((e,t)=>e+t.total_amount,0),A=r.find(e=>e.user_id===Number(N));return(0,s.jsxs)("div",{style:{padding:"2rem"},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"h3 mb-1",children:"Sales Reports"}),(0,s.jsx)("p",{className:"text-muted",children:"View transaction history and revenue"})]}),(0,s.jsxs)("button",{onClick:()=>{let e=new URLSearchParams;"all"!==N&&e.set("userId",N),window.open("/reports/export?".concat(e.toString()),"_blank")},className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,s.jsx)(n.Z,{size:18}),"Export Report"]})]}),(0,s.jsx)("div",{className:"card mb-6",style:{padding:"1.5rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("label",{className:"text-sm font-bold",children:"Filter by Cashier:"}),(0,s.jsxs)("select",{value:N,onChange:e=>S(e.target.value),style:{padding:"0.5rem 1rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.9rem",minWidth:"200px"},children:[(0,s.jsx)("option",{value:"all",children:"All Cashiers"}),r.map(e=>(0,s.jsx)("option",{value:e.user_id,children:e.full_name},e.user_id))]}),A&&(0,s.jsxs)("div",{style:{marginLeft:"auto",textAlign:"right"},children:[(0,s.jsxs)("div",{className:"text-muted text-sm",children:["Total Sales by ",A.full_name]}),(0,s.jsxs)("div",{className:"text-2xl font-bold",style:{color:"var(--primary)"},children:["$",C.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})}),g&&(0,s.jsxs)("div",{className:"grid gap-6 mb-8",style:{gridTemplateColumns:"repeat(4, 1fr)"},children:[(0,s.jsx)(p.Z,{title:"Total Revenue",value:"$".concat(g.totalRevenue.toLocaleString(void 0,{minimumFractionDigits:2})),trend:g.monthRevenue&&g.totalRevenue?"+".concat((g.monthRevenue/g.totalRevenue*100).toFixed(1),"%"):"N/A",trendUp:!0,icon:(0,s.jsx)(l.Z,{size:24})}),(0,s.jsx)(p.Z,{title:"Total Transactions",value:g.totalSales.toString(),trend:g.todaySales&&g.totalSales?"+".concat((g.todaySales/g.totalSales*100).toFixed(1),"%"):"N/A",trendUp:!0,icon:(0,s.jsx)(a.Z,{size:24})}),(0,s.jsx)(p.Z,{title:"Avg. Transaction",value:g.totalSales>0?"$".concat((g.totalRevenue/g.totalSales).toFixed(2)):"$0.00",trend:"Per Order",trendUp:!0,icon:(0,s.jsx)(d.Z,{size:24})}),(0,s.jsx)(p.Z,{title:"Active Cashiers",value:r.length.toString(),trend:"Staff Members",trendUp:!0,icon:(0,s.jsx)(o.Z,{size:24})})]}),(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-lg font-bold",children:"Recent Transactions"}),(0,s.jsxs)("div",{style:{position:"relative",width:"300px"},children:[(0,s.jsx)(c.Z,{size:16,className:"text-muted",style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)"}}),(0,s.jsx)("input",{type:"text",placeholder:"Search invoice, cashier, or customer...",value:w,onChange:e=>Z(e.target.value),style:{width:"100%",padding:"0.5rem 1rem 0.5rem 2.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.9rem"}})]})]}),(0,s.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,s.jsx)("thead",{style:{background:"var(--background)",color:"var(--foreground-secondary)",fontSize:"0.85rem",textAlign:"left"},children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Date"}),(0,s.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Invoice #"}),(0,s.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Customer"}),(0,s.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Cashier"}),(0,s.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Payment"}),(0,s.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Total"}),(0,s.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Details"})]})}),(0,s.jsx)("tbody",{style:{fontSize:"0.95rem"},children:j?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"p-4 text-center",children:"Loading sales history..."})}):0===z.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:7,className:"p-4 text-center text-muted",children:"No transactions found"})}):z.map(e=>(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)",background:b===e.sale_id?"var(--surface-hover)":"transparent"},children:[(0,s.jsx)("td",{style:{padding:"1rem",color:"var(--muted)"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Z,{size:14}),new Date(e.sale_date).toLocaleString()]})}),(0,s.jsx)("td",{style:{padding:"1rem",fontWeight:500},children:e.invoice_number||"N/A"}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{size:14,className:"text-muted"}),e.customer?e.customer.full_name:"Walk-in"]})}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Z,{size:14,className:"text-muted"}),e.user.full_name]})}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsx)("span",{style:{padding:"2px 8px",borderRadius:"4px",border:"1px solid var(--border)",fontSize:"0.85rem"},children:e.payment_method})}),(0,s.jsxs)("td",{style:{padding:"1rem",fontWeight:"bold"},children:["$",e.total_amount.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,s.jsx)("td",{style:{padding:"1rem"},children:(0,s.jsx)("button",{onClick:()=>_(e.sale_id),className:"btn btn-icon btn-sm",children:b===e.sale_id?(0,s.jsx)(x,{size:18}):(0,s.jsx)(h.Z,{size:18})})})]}),b===e.sale_id&&(0,s.jsx)("tr",{style:{background:"var(--surface-hover)"},children:(0,s.jsx)("td",{colSpan:7,style:{padding:"0 1rem 1rem 1rem"},children:(0,s.jsxs)("div",{style:{background:"white",padding:"1rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)"},children:[(0,s.jsx)("h4",{className:"text-sm font-bold mb-2",children:"Order Summary"}),(0,s.jsxs)("table",{style:{width:"100%",fontSize:"0.9rem"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{style:{color:"var(--muted)"},children:[(0,s.jsx)("th",{style:{textAlign:"left",paddingBottom:"0.5rem"},children:"Product"}),(0,s.jsx)("th",{style:{textAlign:"right",paddingBottom:"0.5rem"},children:"Qty"}),(0,s.jsx)("th",{style:{textAlign:"right",paddingBottom:"0.5rem"},children:"Price"}),(0,s.jsx)("th",{style:{textAlign:"right",paddingBottom:"0.5rem"},children:"Subtotal"})]})}),(0,s.jsx)("tbody",{children:e.sale_items.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{style:{padding:"0.25rem 0"},children:e.product.name}),(0,s.jsx)("td",{style:{textAlign:"right",padding:"0.25rem 0"},children:e.quantity}),(0,s.jsxs)("td",{style:{textAlign:"right",padding:"0.25rem 0"},children:["$",e.unit_price.toFixed(2)]}),(0,s.jsxs)("td",{style:{textAlign:"right",padding:"0.25rem 0",fontWeight:500},children:["$",e.subtotal.toFixed(2)]})]},e.sale_item_id))})]})]})})})]},e.sale_id))})]})]})]})}},93801:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(3827),i=r(64090),n=r(29733),l=r(10775);function a(e){let{title:t,value:r,trend:a,trendUp:d,icon:o}=e;return(0,s.jsxs)("div",{className:"bg-white/70 backdrop-blur-md rounded-2xl border border-white/60 shadow-sm hover:shadow-xl transition-all duration-300 group overflow-hidden relative",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-10 p-6 pb-0",children:[(0,s.jsx)("div",{className:"p-3.5 bg-indigo-50/50 rounded-2xl text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:i.cloneElement(o,{size:24})}),a&&(0,s.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ".concat(d?"bg-green-50 text-green-600":"bg-rose-50 text-rose-600"),children:[d?(0,s.jsx)(n.Z,{size:14}):(0,s.jsx)(l.Z,{size:14}),a]})]}),(0,s.jsxs)("div",{className:"p-6 pt-2 relative z-10",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-1",children:t}),(0,s.jsx)("div",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:r})]}),(0,s.jsx)("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-indigo-500/5 rounded-full blur-3xl group-hover:bg-indigo-500/10 transition-colors"})]})}},87461:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(64090),i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let r=(0,s.forwardRef)((r,l)=>{let{color:a="currentColor",size:d=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:m,...x}=r;return(0,s.createElement)("svg",{ref:l,...i,width:d,height:d,stroke:a,strokeWidth:c?24*Number(o)/Number(d):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...x},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},97307:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},48219:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},44715:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},37841:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},69475:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},28670:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},92600:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},10775:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},29733:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},11213:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},34059:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])}},function(e){e.O(0,[971,69,744],function(){return e(e.s=51625)}),_N_E=e.O()}]);