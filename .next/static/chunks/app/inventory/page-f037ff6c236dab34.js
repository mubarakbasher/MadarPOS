(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[268],{4789:function(e,t,r){Promise.resolve().then(r.bind(r,37220))},37220:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(3827),a=r(64090),i=r(4697),n=r(87461);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=(0,n.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var l=r(29733),d=r(28670);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,n.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),x=(0,n.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),u=(0,n.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var g=r(8792),m=r(52235),h=r(85083),p=r(70699),b=r(47907);function f(e){let{isOpen:t,onClose:r,product:i}=e,n=(0,b.useRouter)(),[o,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(""),[x,u]=(0,a.useState)("correction"),[g,f]=(0,a.useState)("");if(!t||!i)return null;let y=async e=>{e.preventDefault(),l(!0);try{let e=await fetch("/api/inventory/adjust",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:i.id,branchId:i.branchId,physicalQuantity:parseInt(d),reason:x,notes:g})});if(!e.ok){let t=await e.json();throw Error(t.message||"Adjustment failed")}r(),n.refresh()}catch(e){alert(e.message)}finally{l(!1)}};return(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-xl border border-white/20 shadow-2xl rounded-2xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[(0,s.jsxs)("div",{className:"px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gray-50/50",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Adjust Stock"}),(0,s.jsx)("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-all duration-200",children:(0,s.jsx)(m.Z,{size:20})})]}),(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-6 p-4 bg-indigo-50/50 text-indigo-700 rounded-xl border border-indigo-100 text-sm flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"font-semibold text-indigo-900",children:"Product:"}),(0,s.jsx)("span",{children:i.name})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"font-semibold text-indigo-900",children:"Current System Stock:"}),(0,s.jsx)("span",{className:"font-mono font-bold",children:i.currentStock})]})]}),(0,s.jsxs)("form",{onSubmit:y,className:"flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 animate-in slide-in-from-bottom-2 duration-300 delay-100",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500",children:"New Physical Quantity"}),(0,s.jsx)("input",{type:"number",required:!0,className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-700 font-bold text-lg",placeholder:"e.g. 18",value:d,onChange:e=>c(e.target.value)}),(0,s.jsx)("p",{className:"text-xs text-gray-400",children:"Enter the actual count found on shelf."})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 animate-in slide-in-from-bottom-2 duration-300 delay-200",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500",children:"Reason"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-700 appearance-none cursor-pointer",value:x,onChange:e=>u(e.target.value),children:[(0,s.jsx)("option",{value:"correction",children:"Correction / Audit"}),(0,s.jsx)("option",{value:"damage",children:"Damaged Goods"}),(0,s.jsx)("option",{value:"theft",children:"Theft / Loss"}),(0,s.jsx)("option",{value:"return",children:"Customer Return (Restock)"})]}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:(0,s.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m6 9 6 6 6-6"})})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 animate-in slide-in-from-bottom-2 duration-300 delay-300",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500",children:"Notes (Optional)"}),(0,s.jsx)("textarea",{className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-700 resize-none",rows:2,placeholder:"Add any additional details...",value:g,onChange:e=>f(e.target.value)})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-4 pt-4 border-t border-gray-100 animate-in slide-in-from-bottom-2 duration-300 delay-400",children:[(0,s.jsx)("button",{type:"button",onClick:r,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-gray-600 font-medium hover:bg-gray-50 hover:text-gray-900 transition-all duration-200",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:o,className:"px-6 py-2.5 rounded-xl bg-indigo-600 text-white font-medium hover:bg-indigo-700 hover:shadow-lg hover:shadow-indigo-500/30 transition-all duration-200 flex items-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[o?(0,s.jsx)(h.Z,{size:18,className:"animate-spin"}):(0,s.jsx)(p.Z,{size:18}),"Confirm Adjustment"]})]})]})]})]})})}/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let y=(0,n.Z)("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function j(e){let{isOpen:t,onClose:r,product:i,onSuccess:n}=e,[o,l]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[x,u]=(0,a.useState)([]),[g,b]=(0,a.useState)([]),[f,j]=(0,a.useState)(!1),[v,N]=(0,a.useState)({name:"",sku:"",categoryId:"",costPrice:"",sellingPrice:"",reorderLevel:""});(0,a.useEffect)(()=>{t&&(fetch("/api/categories").then(e=>e.json()).then(e=>u(e)).catch(e=>console.error("Failed to load categories",e)),i&&(j(!0),fetch("/api/products/".concat(i.id,"/inventory")).then(e=>e.json()).then(e=>b(e)).catch(e=>console.error("Failed to load branch inventory",e)).finally(()=>j(!1))),i&&N({name:i.name,sku:i.sku,categoryId:String(i.categoryId),costPrice:String(i.costPrice),sellingPrice:String(i.sellingPrice),reorderLevel:String(i.reorderLevel)}))},[t,i]);let w=async e=>{if(e.preventDefault(),i){l(!0);try{if(!(await fetch("/api/products/".concat(i.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)})).ok)throw Error("Failed to update product");n(),r()}catch(e){console.error(e),alert("Failed to update product")}finally{l(!1)}}},k=async()=>{if(i&&confirm("Are you sure you want to delete this product? This action cannot be undone.")){c(!0);try{let e=await fetch("/api/products/".concat(i.id),{method:"DELETE"});if(!e.ok){let t=await e.json();throw Error(t.message||"Failed to delete product")}n(),r()}catch(e){console.error(e),alert(e.message)}finally{c(!1)}}};return t?(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm animate-in fade-in duration-200",children:(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-xl border border-white/20 shadow-2xl rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto overflow-x-hidden animate-in zoom-in-95 duration-200",style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)"},children:[(0,s.jsxs)("div",{className:"relative px-6 py-4 border-b border-gray-100 flex justify-between items-center bg-gradient-to-r from-indigo-50/30 to-white",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600",children:"Edit Product"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Update product details and inventory settings"})]}),(0,s.jsx)("button",{onClick:r,className:"p-2 rounded-full hover:bg-gray-100 text-gray-400 hover:text-gray-600 transition-all duration-200",children:(0,s.jsx)(m.Z,{size:18})})]}),(0,s.jsxs)("form",{onSubmit:w,className:"p-6 flex flex-col gap-5",children:[(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"Product Name"}),(0,s.jsx)("input",{type:"text",placeholder:"e.g. Premium Wireless Mouse",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 outline-none text-gray-700 font-medium placeholder:text-gray-400",value:v.name,onChange:e=>N({...v,name:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-5",children:[(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"SKU / Code"}),(0,s.jsx)("input",{type:"text",placeholder:"PROD-001",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 outline-none text-gray-700 font-mono text-sm",value:v.sku,onChange:e=>N({...v,sku:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"Category"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("select",{className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all duration-200 outline-none text-gray-700 appearance-none cursor-pointer",value:v.categoryId,onChange:e=>N({...v,categoryId:e.target.value}),required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select Category"}),x.map(e=>(0,s.jsx)("option",{value:e.category_id,children:e.category_name},e.category_id))]}),(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:(0,s.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:(0,s.jsx)("path",{d:"m6 9 6 6 6-6"})})})]})]})]}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50/50 rounded-xl border border-gray-100 grid grid-cols-2 gap-5",children:[(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-green-600 transition-colors",children:"Cost Price"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:"$"}),(0,s.jsx)("input",{type:"number",step:"0.01",className:"w-full pl-7 pr-4 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-green-100 focus:border-green-500 transition-all outline-none text-gray-700 font-medium",value:v.costPrice,onChange:e=>N({...v,costPrice:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-indigo-600 transition-colors",children:"Selling Price"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 font-medium",children:"$"}),(0,s.jsx)("input",{type:"number",step:"0.01",className:"w-full pl-7 pr-4 py-2 bg-white border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-gray-900 font-bold",value:v.sellingPrice,onChange:e=>N({...v,sellingPrice:e.target.value}),required:!0})]})]})]}),(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-2.5 block",children:"Stock by Branch"}),f?(0,s.jsx)("div",{className:"flex items-center justify-center p-8 bg-gray-50/50 rounded-xl",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,s.jsx)("div",{className:"w-5 h-5 border-2 border-indigo-600 border-t-transparent rounded-full animate-spin"}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Loading branch inventory..."})]})}):g.length>0?(0,s.jsx)("div",{className:"space-y-2",children:g.map(e=>(0,s.jsx)("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-50/30 rounded-xl border border-gray-100 hover:border-indigo-200 transition-all duration-200 hover:shadow-sm",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-bold text-gray-900 text-sm mb-0.5",children:e.branchName}),e.location&&(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["\uD83D\uDCCD ",e.location]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(e.isLowStock?"text-rose-600":"text-gray-900"),children:e.quantity}),(0,s.jsx)("div",{className:"text-xs text-gray-400 font-medium",children:"units"})]}),e.isLowStock&&(0,s.jsx)("div",{className:"px-2.5 py-1 rounded-lg bg-rose-50 border border-rose-200",children:(0,s.jsx)("span",{className:"text-xs font-bold text-rose-600",children:"Low"})})]})]})},e.branchId))}):(0,s.jsx)("div",{className:"p-6 bg-gray-50/50 rounded-xl border border-gray-100 text-center",children:(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"No inventory data available for this product"})})]}),(0,s.jsxs)("div",{className:"group",children:[(0,s.jsx)("label",{className:"text-xs font-semibold uppercase tracking-wider text-gray-500 mb-1.5 block group-focus-within:text-orange-500 transition-colors",children:"Low Stock Alert Level"}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("input",{type:"number",className:"w-24 px-4 py-2 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-orange-100 focus:border-orange-500 transition-all outline-none text-gray-700 font-medium",value:v.reorderLevel,onChange:e=>N({...v,reorderLevel:e.target.value}),required:!0}),(0,s.jsx)("span",{className:"text-xs text-gray-400",children:"System will alert when stock falls below this quantity."})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mt-4 pt-4 border-t border-gray-100",children:[(0,s.jsxs)("button",{type:"button",onClick:k,disabled:o||d,className:"px-4 py-2.5 rounded-xl border border-red-100 text-red-600 font-medium hover:bg-red-50 transition-all duration-200 flex items-center gap-2",children:[d?(0,s.jsx)(h.Z,{size:18,className:"animate-spin"}):(0,s.jsx)(y,{size:18}),"Delete Product"]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:r,className:"px-5 py-2.5 rounded-xl border border-gray-200 text-gray-600 font-medium hover:bg-gray-50 hover:text-gray-900 transition-all duration-200",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:o,className:"px-6 py-2.5 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium hover:shadow-lg hover:shadow-blue-500/30 hover:-translate-y-0.5 active:translate-y-0 disabled:opacity-70 disabled:cursor-not-allowed transition-all duration-200 flex items-center gap-2",children:[o?(0,s.jsx)(h.Z,{size:18,className:"animate-spin"}):(0,s.jsx)(p.Z,{size:18}),"Save Changes"]})]})]})]})]})}):null}var v=r(64547);function N(e){let{stockItems:t,categories:r,pagination:n}=e,m=(0,b.useRouter)(),h=(0,b.useSearchParams)(),[p,y]=(0,a.useState)(null),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[C,P]=(0,a.useState)(null),[Z,z]=(0,a.useState)(h.get("search")||"");(0,a.useEffect)(()=>{let e=setTimeout(()=>{Z!==(h.get("search")||"")&&E("search",Z)},500);return()=>clearTimeout(e)},[Z]);let L=n.totalItems,_=t.filter(e=>e.quantity<=e.reorder_level).length,q=e=>Number(e.product.cost_price),A=t.reduce((e,t)=>e+q(t)*t.quantity,0),E=(e,t)=>{let r=new URLSearchParams(h.toString());t?r.set(e,t):r.delete(e),"page"!==e&&r.set("page","1"),m.push("?".concat(r.toString()))},D=e=>{y({id:e.product.product_id,name:e.product.name,currentStock:e.quantity,branchId:e.branch_id}),w(!0)},I=e=>{P({id:e.product.product_id,name:e.product.name,sku:e.product.sku,categoryId:e.product.category_id,costPrice:Number(e.product.cost_price),sellingPrice:Number(e.product.selling_price),reorderLevel:e.reorder_level}),S(!0)};return(0,s.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50/30 overflow-hidden relative",children:[(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-96 bg-gradient-to-b from-indigo-50/50 to-transparent -z-10"}),(0,s.jsx)(v.default,{title:"Inventory Management"}),(0,s.jsx)("div",{className:"flex-1 overflow-auto p-8 pt-6",children:(0,s.jsxs)("div",{className:"max-w-[1600px] mx-auto animate-in fade-in slide-in-from-bottom-4 duration-700",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Overview"}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Manage your products and stock levels"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsxs)("button",{onClick:()=>{let e=new URLSearchParams(h.toString());e.delete("page"),window.open("/inventory/export?".concat(e.toString()),"_blank")},className:"px-5 py-2.5 bg-white border border-gray-200/60 rounded-xl text-gray-600 font-medium hover:bg-gray-50 hover:text-gray-900 transition-all shadow-sm hover:shadow-md flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-lg",children:"\uD83D\uDCCA"})," Export Report"]}),(0,s.jsxs)(g.default,{href:"/inventory/add",className:"group px-5 py-2.5 bg-gradient-to-r from-indigo-600 to-violet-600 text-white rounded-xl font-medium hover:shadow-lg hover:shadow-indigo-500/30 transition-all flex items-center gap-2 transform hover:-translate-y-0.5",children:[(0,s.jsx)(i.Z,{size:18,className:"group-hover:rotate-12 transition-transform"}),"Add Product"]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white/70 backdrop-blur-md p-6 rounded-2xl border border-white/50 shadow-sm hover:shadow-xl transition-all duration-300 group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("div",{className:"p-3.5 bg-indigo-50 rounded-2xl text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(i.Z,{size:24})}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase text-indigo-600 bg-indigo-50/50 px-3 py-1 rounded-full tracking-wide",children:"Total"})]}),(0,s.jsx)("div",{className:"text-4xl font-bold text-gray-900 mb-1 tracking-tight",children:L}),(0,s.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:"Total products found"})]}),(0,s.jsxs)("div",{className:"bg-white/70 backdrop-blur-md p-6 rounded-2xl border border-white/50 shadow-sm hover:shadow-xl transition-all duration-300 group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsx)("div",{className:"p-3.5 bg-rose-50 rounded-2xl text-rose-600 group-hover:scale-110 transition-transform duration-300",children:(0,s.jsx)(o,{size:24})}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase text-rose-600 bg-rose-50/50 px-3 py-1 rounded-full tracking-wide",children:"Alert"})]}),(0,s.jsx)("div",{className:"text-4xl font-bold text-gray-900 mb-1 tracking-tight",children:_}),(0,s.jsx)("div",{className:"text-sm text-gray-500 font-medium",children:"Low stock on this page"})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-indigo-600 to-violet-700 p-6 rounded-2xl shadow-lg hover:shadow-indigo-500/30 transition-all duration-300 text-white relative overflow-hidden group",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 rounded-full -mr-16 -mt-16 blur-2xl group-hover:bg-white/20 transition-all"}),(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[(0,s.jsx)("div",{className:"p-3.5 bg-white/20 backdrop-blur-sm rounded-2xl text-white",children:(0,s.jsx)(l.Z,{size:24})}),(0,s.jsx)("span",{className:"text-xs font-bold uppercase text-white/90 bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full tracking-wide",children:"Value"})]}),(0,s.jsxs)("div",{className:"text-4xl font-bold mb-1 tracking-tight relative z-10",children:["$",A.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),(0,s.jsx)("div",{className:"text-sm text-indigo-100 font-medium relative z-10",children:"Visible inventory value"})]})]}),(0,s.jsxs)("div",{className:"bg-white/50 backdrop-blur-md rounded-2xl border border-white/60 shadow-sm mb-6 p-4 flex gap-4 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md group",children:[(0,s.jsx)(d.Z,{size:20,className:"text-gray-400 absolute left-3.5 top-1/2 -translate-y-1/2 group-focus-within:text-indigo-500 transition-colors"}),(0,s.jsx)("input",{type:"text",placeholder:"Search by name, SKU...",value:Z,onChange:e=>z(e.target.value),className:"w-full pl-11 pr-4 py-2.5 bg-white/80 border border-gray-200 rounded-xl focus:bg-white focus:ring-2 focus:ring-indigo-100 focus:border-indigo-500 transition-all outline-none text-sm font-medium"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 border-l border-gray-200/50 pl-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{size:18,className:"text-gray-500"}),(0,s.jsx)("span",{className:"text-sm font-semibold text-gray-600",children:"Filter:"})]}),(0,s.jsxs)("select",{value:h.get("category")||"all",onChange:e=>E("category","all"===e.target.value?null:e.target.value),className:"px-4 py-2 bg-white border border-gray-200 rounded-lg text-sm text-gray-700 font-medium focus:ring-2 focus:ring-indigo-100 outline-none cursor-pointer hover:border-indigo-300 transition-colors",children:[(0,s.jsx)("option",{value:"all",children:"All Categories"}),r.map(e=>(0,s.jsx)("option",{value:e.category_id,children:e.category_name},e.category_id))]})]})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl border border-white/60 shadow-lg shadow-gray-200/50 overflow-hidden flex flex-col min-h-[500px]",children:[(0,s.jsx)("div",{className:"overflow-auto flex-1",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,s.jsx)("thead",{className:"bg-gray-50/90 backdrop-blur-sm border-b border-gray-100",children:(0,s.jsxs)("tr",{className:"text-xs font-bold uppercase tracking-wider text-gray-500",children:[(0,s.jsx)("th",{className:"px-6 py-5",children:"Product Details"}),(0,s.jsx)("th",{className:"px-6 py-5",children:"SKU"}),(0,s.jsx)("th",{className:"px-6 py-5",children:"Category"}),(0,s.jsx)("th",{className:"px-6 py-5",children:"Stock Level"}),(0,s.jsx)("th",{className:"px-6 py-5",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-5 text-right",children:"Actions"})]})}),(0,s.jsxs)("tbody",{className:"text-sm divide-y divide-gray-100",children:[t.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-indigo-50/40 transition-colors group",children:[(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gray-100 flex items-center justify-center text-gray-400 font-bold text-lg",children:e.product.name.charAt(0)}),(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"font-bold text-gray-900 text-base",children:e.product.name})})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"font-mono text-gray-500 text-xs bg-gray-100 px-2.5 py-1 rounded-md border border-gray-200",children:e.product.sku})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:"text-gray-600 font-medium",children:e.product.category.category_name})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-bold text-lg ".concat(e.quantity<=e.reorder_level?"text-rose-600":"text-gray-700"),children:e.quantity}),(0,s.jsx)("span",{className:"text-xs text-gray-400 font-medium",children:"units"})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:e.quantity<=e.reorder_level?(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-rose-50 text-rose-600 border border-rose-100",children:[(0,s.jsx)(o,{size:14,className:"fill-rose-600/20"})," Low Stock"]}):(0,s.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-bold bg-green-50 text-green-600 border border-green-100",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," In Stock"]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2 opacity-50 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:()=>D(e),className:"px-4 py-2 rounded-lg border border-gray-200 text-gray-600 text-xs font-bold hover:bg-gray-50 hover:border-gray-300 transition-all",children:"Adjust"}),(0,s.jsx)("button",{onClick:()=>I(e),className:"px-4 py-2 rounded-lg bg-gray-900 text-white text-xs font-bold hover:bg-black hover:shadow-lg hover:-translate-y-0.5 transition-all",children:"Edit"})]})})]},e.inventory_id)),0===t.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-6 py-16 text-center text-gray-500",children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center gap-3",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-50 rounded-full flex items-center justify-center",children:(0,s.jsx)(i.Z,{size:32,className:"text-gray-300"})}),(0,s.jsx)("p",{className:"font-medium text-lg text-gray-600",children:"No products found"}),(0,s.jsx)("p",{className:"text-sm text-gray-400",children:"Try adjusting your filters"})]})})})]})]})}),(0,s.jsxs)("div",{className:"bg-white/50 backdrop-blur-sm border-t border-gray-100 p-4 flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-500 font-medium",children:["Showing page ",n.currentPage," of ",n.totalPages]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{disabled:n.currentPage<=1,onClick:()=>E("page",String(n.currentPage-1)),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-600 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 transition-all",children:[(0,s.jsx)(x,{size:16})," Previous"]}),(0,s.jsxs)("button",{disabled:n.currentPage>=n.totalPages,onClick:()=>E("page",String(n.currentPage+1)),className:"px-4 py-2 rounded-lg border border-gray-200 bg-white text-gray-600 font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1 transition-all",children:["Next ",(0,s.jsx)(u,{size:16})]})]})]})]})]})}),(0,s.jsx)(f,{isOpen:N,onClose:()=>w(!1),product:p}),(0,s.jsx)(j,{isOpen:k,onClose:()=>S(!1),product:C,onSuccess:()=>{m.refresh()}})]})}},64547:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(3827),a=r(28670),i=r(43345),n=r(64090);function o(e){let{title:t}=e,[r,o]=(0,n.useState)(null),[l,d]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();o(t)}}catch(e){console.error("Failed to fetch user info",e)}finally{d(!1)}})()},[]),(0,s.jsxs)("header",{className:"flex items-center justify-between h-20 px-8 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:t}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),l?"...":"Welcome back, ".concat(r?r.full_name:"Guest")]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)(a.Z,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-600 transition-colors"}),(0,s.jsx)("input",{type:"text",placeholder:"Quick search...",className:"w-[320px] pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 transition-all outline-none font-medium text-sm shadow-sm"})]}),(0,s.jsx)("div",{className:"h-8 w-[1px] bg-gray-200"}),(0,s.jsxs)("button",{className:"p-2.5 rounded-full bg-white border border-gray-200 text-gray-500 hover:text-indigo-600 hover:border-indigo-100 hover:bg-indigo-50 transition-all shadow-sm relative",children:[(0,s.jsx)(i.Z,{size:20}),(0,s.jsx)("span",{className:"absolute top-0 right-0 w-3 h-3 bg-rose-500 border-2 border-white rounded-full"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 pl-2",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600 to-violet-600 text-white flex items-center justify-center font-bold shadow-lg shadow-indigo-200",children:l?"...":r?r.full_name.charAt(0).toUpperCase():"?"}),l?(0,s.jsx)("div",{className:"h-8 w-24 bg-gray-100 rounded animate-pulse"}):(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{className:"text-sm font-bold text-gray-800 leading-tight",children:r?r.full_name:"Guest"}),(0,s.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:r?r.role:"Visitor"})]})]})]})]})}},87461:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var s=r(64090),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,s.forwardRef)((r,n)=>{let{color:o="currentColor",size:l=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:x="",children:u,...g}=r;return(0,s.createElement)("svg",{ref:n,...a,width:l,height:l,stroke:o,strokeWidth:c?24*Number(d)/Number(l):d,className:["lucide","lucide-".concat(i(e)),x].join(" "),...g},[...t.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])});return r.displayName="".concat(e),r}},43345:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},85083:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]])},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},70699:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},28670:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},29733:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},52235:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(25250),a=r.n(s)},47907:function(e,t,r){"use strict";var s=r(15313);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=4789)}),_N_E=e.O()}]);