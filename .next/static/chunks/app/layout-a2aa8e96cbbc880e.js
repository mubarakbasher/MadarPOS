(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{83834:function(e,t,r){Promise.resolve().then(r.t.bind(r,52445,23)),Promise.resolve().then(r.bind(r,91853)),Promise.resolve().then(r.bind(r,33904)),Promise.resolve().then(r.bind(r,72976))},91853:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(3827);r(64090);var s=r(47907);function a(e){let{children:t,sidebar:r}=e,a=(0,s.usePathname)();return"/login"===a||"/signup"===a?(0,n.jsx)("main",{className:"min-h-screen w-full bg-gray-50 flex items-center justify-center",children:t}):(0,n.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[r,(0,n.jsx)("main",{className:"flex-1 ml-[280px] w-[calc(100%-280px)] min-h-screen transition-all duration-300",children:t})]})}},33904:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var n=r(3827),s=r(52235),a=r(87461);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,a.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),l=(0,a.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var o=r(82800),c=r(4697),d=r(69475),u=r(34059),h=r(29910);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let x=(0,a.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var f=r(64090),m=r(47907),g=r(8792);function y(){let[e,t]=(0,f.useState)(null),[r,a]=(0,f.useState)(!1),g=(0,m.useRouter)(),y=(0,m.usePathname)();(0,f.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let r=await e.json();t(r)}}catch(e){console.error("Failed to fetch user info",e)}})()},[]),(0,f.useEffect)(()=>{a(!1)},[y]);let v=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),g.push("/login"),g.refresh()}catch(e){console.error("Logout failed",e)}},b=()=>{a(!r)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:b,className:"hamburger-menu","aria-label":"Toggle menu",children:r?(0,n.jsx)(s.Z,{size:24}):(0,n.jsx)(i,{size:24})}),(0,n.jsx)("div",{className:"mobile-overlay ".concat(r?"active":""),onClick:b}),(0,n.jsxs)("aside",{className:"w-[280px] h-screen bg-white border-r border-gray-200 flex flex-col fixed left-0 top-0 z-50 shadow-lg ".concat(r?"sidebar-mobile-shown":"sidebar-mobile-hidden"),children:[(0,n.jsx)("div",{className:"p-6 border-b border-gray-100 bg-gradient-to-r from-gray-50 to-white",children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-xl bg-indigo-600 text-white flex items-center justify-center shadow-lg shadow-indigo-200",children:(0,n.jsx)("span",{className:"font-bold text-lg",children:"M"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-xl font-bold text-gray-900 tracking-tight leading-none",children:"MADAR"}),(0,n.jsx)("p",{className:"text-xs text-gray-400 font-medium mt-1",children:"POS & Inventory"})]})]})}),(0,n.jsxs)("nav",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[(0,n.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4 px-3 mt-2",children:"Main Menu"}),(0,n.jsxs)("ul",{className:"flex flex-col gap-1",children:[(0,n.jsx)(p,{href:"/",icon:(0,n.jsx)(l,{size:20}),label:"Dashboard",active:"/"===y}),(0,n.jsx)(p,{href:"/sales",icon:(0,n.jsx)(o.Z,{size:20}),label:"Point of Sale",active:"/sales"===y}),(0,n.jsx)(p,{href:"/inventory",icon:(0,n.jsx)(c.Z,{size:20}),label:"Inventory",active:y.startsWith("/inventory")}),(0,n.jsx)(p,{href:"/reports",icon:(0,n.jsx)(d.Z,{size:20}),label:"Reports",active:y.startsWith("/reports")})]}),(0,n.jsx)("p",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mt-8 mb-4 px-3",children:"Management"}),(0,n.jsxs)("ul",{className:"flex flex-col gap-1",children:[(0,n.jsx)(p,{href:"/users",icon:(0,n.jsx)(u.Z,{size:20}),label:"Team Members",active:y.startsWith("/users")}),(0,n.jsx)(p,{href:"/branches",icon:(0,n.jsx)(c.Z,{size:20}),label:"Branches",active:y.startsWith("/branches")}),(0,n.jsx)(p,{href:"/customers",icon:(0,n.jsx)(u.Z,{size:20}),label:"Customers",active:y.startsWith("/customers")}),(0,n.jsx)(p,{href:"/settings",icon:(0,n.jsx)(h.Z,{size:20}),label:"Settings",active:y.startsWith("/settings")})]})]}),(0,n.jsx)("div",{className:"p-4 border-t border-gray-100 bg-gray-50/50",children:(0,n.jsxs)("button",{onClick:v,className:"flex items-center gap-3 w-full p-2.5 rounded-xl hover:bg-white border border-transparent hover:border-gray-200 transition-all text-left group hover:shadow-sm",children:[(0,n.jsx)("div",{className:"w-9 h-9 rounded-full bg-gray-200 flex items-center justify-center text-gray-500 overflow-hidden",children:e?(0,n.jsx)("div",{className:"w-full h-full bg-indigo-100 flex items-center justify-center text-indigo-700 font-bold text-sm",children:e.full_name.charAt(0)}):(0,n.jsx)(u.Z,{size:18})}),(0,n.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,n.jsx)("p",{className:"text-sm font-bold text-gray-800 truncate",children:e?e.full_name:"Loading..."}),(0,n.jsx)("p",{className:"text-xs text-gray-500 truncate capitalize",children:e?e.role:"..."})]}),(0,n.jsx)(x,{size:16,className:"text-gray-400 group-hover:text-rose-500 transition-colors"})]})})]})]})}function p(e){let{icon:t,label:r,href:s,active:a}=e;return(0,n.jsx)("li",{children:(0,n.jsxs)(g.default,{href:s,className:"flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 font-medium text-[0.95rem] group relative overflow-hidden ".concat(a?"bg-indigo-50 text-indigo-600 shadow-sm":"text-gray-500 hover:bg-gray-50 hover:text-gray-900"),children:[a&&(0,n.jsx)("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-indigo-600 rounded-r-full"}),(0,n.jsx)("span",{className:a?"text-indigo-600":"group-hover:text-gray-800",children:t}),(0,n.jsx)("span",{children:r})]})})}},72976:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(3827),s=r(64090);function a(){let[e,t]=(0,s.useState)(!0),[r,a]=(0,s.useState)(!1),[i,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("Service Worker registered:",e)}).catch(e=>{console.error("Service Worker registration failed:",e)});let e=()=>t(!0),r=()=>t(!1);window.addEventListener("online",e),window.addEventListener("offline",r),t(navigator.onLine);let n=e=>{e.preventDefault(),l(e),a(!0)};return window.addEventListener("beforeinstallprompt",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r),window.removeEventListener("beforeinstallprompt",n)}},[]);let o=async()=>{if(!i)return;i.prompt();let{outcome:e}=await i.userChoice;console.log("User response to install prompt: ".concat(e)),l(null),a(!1)};return(0,n.jsxs)(n.Fragment,{children:[!e&&(0,n.jsxs)("div",{className:"offline-indicator",children:[(0,n.jsx)("svg",{className:"inline-block w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M18.364 5.636a9 9 0 010 12.728m0 0l-2.829-2.829m2.829 2.829L21 21M15.536 8.464a5 5 0 010 7.072m0 0l-2.829-2.829m-4.243 2.829a4.978 4.978 0 01-1.414-2.83m-1.414 5.658a9 9 0 01-2.167-9.238m7.824 2.167a1 1 0 111.414 1.414m-1.414-1.414L3 3m8.293 8.293l1.414 1.414"})}),"You're offline - Changes will sync when connection is restored"]}),r&&(0,n.jsxs)("div",{className:"pwa-install-prompt",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"font-semibold text-sm mb-1",children:"Install MADAR POS"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Install the app for quick access and offline use"})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{onClick:o,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Install"}),(0,n.jsx)("button",{onClick:()=>{a(!1),l(null)},className:"px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors",children:"Not now"})]})]})]})}},87461:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(64090),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,n.forwardRef)((r,i)=>{let{color:l="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:h,...x}=r;return(0,n.createElement)("svg",{ref:i,...s,width:o,height:o,stroke:l,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(a(e)),u].join(" "),...x},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(h)?h:[h]])});return r.displayName="".concat(e),r}},69475:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},4697:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},29910:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},82800:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},34059:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},52235:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return s.a}});var n=r(25250),s=r.n(n)},47907:function(e,t,r){"use strict";var n=r(15313);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},52445:function(){}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=83834)}),_N_E=e.O()}]);