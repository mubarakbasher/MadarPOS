(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{91621:function(e,t,s){Promise.resolve().then(s.bind(s,51010))},51010:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(3827),r=s(64547),i=s(93801),l=s(64090),n=s(26587),o=s(21018),d=s(38333),c=s(23356),x=s(22983),h=s(10166),u=s(43897),m=s(97307),g=s(85083);function f(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[i,f]=(0,l.useState)(7);return(0,l.useEffect)(()=>{(async e=>{r(!0);try{let s=await fetch("/api/dashboard/revenue?days=".concat(e));if(s.ok){let e=await s.json();t(e)}}catch(e){console.error("Failed to fetch revenue",e)}finally{r(!1)}})(i)},[i]),(0,a.jsxs)("div",{className:"bg-white/70 backdrop-blur-md rounded-2xl border border-white/60 shadow-sm p-6 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Revenue Overview"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Income trends over time"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{value:i,onChange:e=>f(parseInt(e.target.value)),className:"appearance-none pl-9 pr-8 py-2 bg-white border border-gray-200 rounded-lg text-sm text-gray-700 font-medium focus:ring-2 focus:ring-indigo-100 outline-none cursor-pointer hover:border-gray-300 transition-colors shadow-sm",children:[(0,a.jsx)("option",{value:7,children:"Last 7 Days"}),(0,a.jsx)("option",{value:14,children:"Last 14 Days"}),(0,a.jsx)("option",{value:30,children:"Last 30 Days"})]}),(0,a.jsx)(m.Z,{size:14,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),(0,a.jsx)("div",{className:"flex-1 w-full min-h-[300px]",children:s?(0,a.jsxs)("div",{className:"h-full flex items-center justify-center text-gray-400 gap-2",children:[(0,a.jsx)(g.Z,{className:"animate-spin",size:20})," Loading Chart..."]}):0===e.length?(0,a.jsx)("div",{className:"h-full flex items-center justify-center text-gray-400 bg-gray-50/50 rounded-xl border border-dashed border-gray-200",children:"No sales data for this period"}):(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(o.T,{data:e,margin:{top:10,right:10,left:0,bottom:0},children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#6366F1",stopOpacity:.3}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#6366F1",stopOpacity:0})]})}),(0,a.jsx)(d.q,{strokeDasharray:"3 3",vertical:!1,stroke:"#E2E8F0"}),(0,a.jsx)(c.K,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#64748B",fontSize:12},dy:10}),(0,a.jsx)(x.B,{axisLine:!1,tickLine:!1,tick:{fill:"#64748B",fontSize:12},tickFormatter:e=>"$".concat(e)}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#FFFFFF",border:"1px solid #E2E8F0",borderRadius:"12px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},itemStyle:{color:"#4F46E5",fontWeight:600},formatter:e=>["$".concat(e.toFixed(2)),"Revenue"]}),(0,a.jsx)(u.u,{type:"monotone",dataKey:"revenue",stroke:"#6366F1",strokeWidth:3,fillOpacity:1,fill:"url(#colorRevenue)",activeDot:{r:6,strokeWidth:0,fill:"#4F46E5"}})]})})})]})}var p=s(48219),j=s(92600),b=s(4697),v=s(29733),y=s(18025),N=s(26490),w=s(8792);function k(){let[e,t]=(0,l.useState)(null),[s,n]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async function(){try{let e=await fetch("/api/dashboard/stats");if(e.ok){let s=await e.json();t(s)}}catch(e){console.error("Failed to load dashboard",e)}finally{n(!1)}})()},[]),s)?(0,a.jsxs)("div",{className:"h-screen flex items-center justify-center bg-gray-50 text-gray-500 gap-3",children:[(0,a.jsx)(g.Z,{className:"animate-spin text-indigo-600",size:24}),(0,a.jsx)("span",{className:"font-medium",children:"Loading Dashboard..."})]}):e?(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-gray-50/30 overflow-hidden relative",children:[(0,a.jsx)("div",{className:"absolute top-0 left-0 w-full h-96 bg-gradient-to-b from-indigo-50/50 to-transparent -z-10"}),(0,a.jsx)(r.default,{title:"Dashboard"}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-8 pt-6",children:(0,a.jsxs)("div",{className:"max-w-[1600px] mx-auto animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-end justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-800 tracking-tight",children:"Today's Performance"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Real-time overview of your business day."})]}),(0,a.jsxs)("div",{className:"px-3 py-1 bg-white border border-gray-200 rounded-full text-xs font-bold text-gray-500 flex items-center gap-2 shadow-sm",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"})," Live"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6",children:[(0,a.jsx)(i.Z,{title:"Today's Revenue",value:"$".concat(e.todayRevenue.toLocaleString(void 0,{minimumFractionDigits:2})),trend:"Daily",trendUp:!0,icon:(0,a.jsx)(p.Z,{})}),(0,a.jsx)(i.Z,{title:"Today's Sales",value:e.todaySales.toString(),trend:"Orders",trendUp:!0,icon:(0,a.jsx)(j.Z,{})}),(0,a.jsx)(i.Z,{title:"Low Stock Alerts",value:"".concat(e.lowStockCount),trend:e.lowStockCount>0?"Action Required":"Healthy",trendUp:0===e.lowStockCount,icon:(0,a.jsx)(b.Z,{})}),(0,a.jsx)(i.Z,{title:"Month Revenue",value:"$".concat(e.monthRevenue.toLocaleString(void 0,{minimumFractionDigits:0})),trend:"This Month",trendUp:!0,icon:(0,a.jsx)(v.Z,{})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"col-span-2 h-[500px]",children:(0,a.jsx)(f,{})}),(0,a.jsxs)("div",{className:"bg-white/70 backdrop-blur-md p-6 rounded-2xl border border-white/60 shadow-sm h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"Recent Sales"}),(0,a.jsxs)(w.default,{href:"/sales",className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 hover:underline flex items-center gap-1",children:["View All ",(0,a.jsx)(y.Z,{size:14})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-3 flex-1 overflow-auto pr-1 custom-scrollbar",children:[0===e.recentSales.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center flex-1 text-gray-400 opacity-60",children:[(0,a.jsx)(j.Z,{size:48,className:"mb-2"}),(0,a.jsx)("p",{className:"text-sm",children:"No recent sales"})]}),e.recentSales.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white/50 border border-gray-100 hover:border-indigo-100 hover:bg-white rounded-xl transition-all group",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 text-indigo-600 flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,a.jsx)(j.Z,{size:18})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-bold text-sm text-gray-800",children:e.invoice||"#".concat(e.id)}),(0,a.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[(0,a.jsx)(N.Z,{size:10}),new Date(e.date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,a.jsxs)("span",{className:"font-bold text-sm text-gray-900 bg-gray-50 px-2.5 py-1 rounded-lg border border-gray-100 group-hover:border-indigo-100 transition-colors",children:["+$",e.total.toFixed(2)]})]},e.id))]})]})]})]})})]}):(0,a.jsx)("div",{className:"h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"Failed to load data"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg",children:"Retry"})]})})}},64547:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(3827),r=s(28670),i=s(43345),l=s(64090);function n(e){let{title:t}=e,[s,n]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/me");if(e.ok){let t=await e.json();n(t)}}catch(e){console.error("Failed to fetch user info",e)}finally{d(!1)}})()},[]),(0,a.jsxs)("header",{className:"flex items-center justify-between h-20 px-8 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 tracking-tight",children:t}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[(0,a.jsx)("span",{className:"w-2 h-2 rounded-full bg-green-500"}),o?"...":"Welcome back, ".concat(s?s.full_name:"Guest")]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-5",children:[(0,a.jsxs)("div",{className:"relative group",children:[(0,a.jsx)(r.Z,{size:18,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400 group-focus-within:text-indigo-600 transition-colors"}),(0,a.jsx)("input",{type:"text",placeholder:"Quick search...",className:"w-[320px] pl-10 pr-4 py-2.5 bg-white border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-100 focus:border-indigo-600 transition-all outline-none font-medium text-sm shadow-sm"})]}),(0,a.jsx)("div",{className:"h-8 w-[1px] bg-gray-200"}),(0,a.jsxs)("button",{className:"p-2.5 rounded-full bg-white border border-gray-200 text-gray-500 hover:text-indigo-600 hover:border-indigo-100 hover:bg-indigo-50 transition-all shadow-sm relative",children:[(0,a.jsx)(i.Z,{size:20}),(0,a.jsx)("span",{className:"absolute top-0 right-0 w-3 h-3 bg-rose-500 border-2 border-white rounded-full"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pl-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600 to-violet-600 text-white flex items-center justify-center font-bold shadow-lg shadow-indigo-200",children:o?"...":s?s.full_name.charAt(0).toUpperCase():"?"}),o?(0,a.jsx)("div",{className:"h-8 w-24 bg-gray-100 rounded animate-pulse"}):(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-gray-800 leading-tight",children:s?s.full_name:"Guest"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:s?s.role:"Visitor"})]})]})]})]})}},93801:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(3827),r=s(64090),i=s(29733),l=s(10775);function n(e){let{title:t,value:s,trend:n,trendUp:o,icon:d}=e;return(0,a.jsxs)("div",{className:"bg-white/70 backdrop-blur-md rounded-2xl border border-white/60 shadow-sm hover:shadow-xl transition-all duration-300 group overflow-hidden relative",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4 relative z-10 p-6 pb-0",children:[(0,a.jsx)("div",{className:"p-3.5 bg-indigo-50/50 rounded-2xl text-indigo-600 group-hover:scale-110 transition-transform duration-300",children:r.cloneElement(d,{size:24})}),n&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold ".concat(o?"bg-green-50 text-green-600":"bg-rose-50 text-rose-600"),children:[o?(0,a.jsx)(i.Z,{size:14}):(0,a.jsx)(l.Z,{size:14}),n]})]}),(0,a.jsxs)("div",{className:"p-6 pt-2 relative z-10",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-500 uppercase tracking-wide mb-1",children:t}),(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:s})]}),(0,a.jsx)("div",{className:"absolute -top-10 -right-10 w-32 h-32 bg-indigo-500/5 rounded-full blur-3xl group-hover:bg-indigo-500/10 transition-colors"})]})}}},function(e){e.O(0,[250,975,971,69,744],function(){return e(e.s=91621)}),_N_E=e.O()}]);