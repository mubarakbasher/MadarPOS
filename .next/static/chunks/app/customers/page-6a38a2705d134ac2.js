(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{36420:function(e,t,s){Promise.resolve().then(s.bind(s,35378))},35378:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(3827),r=s(64090),i=s(70094),l=s(34059),n=s(28670),o=s(85904),d=s(90684),c=s(62457),m=s(29295),x=s(8792),u=s(69102),p=s.n(u),f=s(52235);function b(e){let{isOpen:t,onClose:s,customer:i,onSuccess:l}=e,[n,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[u,b]=(0,r.useState)(""),[h,j]=(0,r.useState)(!1),[y,g]=(0,r.useState)("");(0,r.useEffect)(()=>{i&&t&&(o(i.full_name),c(i.phone||""),x(i.email||""),b(i.address||""))},[i,t]);let k=async e=>{e.preventDefault(),g(""),j(!0);try{let e=await fetch("/api/customers/".concat(null==i?void 0:i.customer_id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({full_name:n,phone:d||null,email:m||null,address:u||null})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to update customer");l(),s()}catch(e){g(e.message)}finally{j(!1)}};return t&&i?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(p(),{id:"23214182e0f186a5",children:".modal-overlay.jsx-23214182e0f186a5{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:9999;padding:1rem}.modal-content.jsx-23214182e0f186a5{background:white;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;-webkit-box-shadow:0 20px 60px rgba(0,0,0,.3);-moz-box-shadow:0 20px 60px rgba(0,0,0,.3);box-shadow:0 20px 60px rgba(0,0,0,.3);width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header.jsx-23214182e0f186a5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:1.5rem;border-bottom:1px solid#e5e7eb}.modal-title.jsx-23214182e0f186a5{font-size:1.25rem;font-weight:700;color:#111827;margin:0}.modal-close.jsx-23214182e0f186a5{background:none;border:none;cursor:pointer;padding:.5rem;color:#6b7280;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-close.jsx-23214182e0f186a5:hover{background:#f3f4f6;color:#111827}.modal-body.jsx-23214182e0f186a5{padding:1.5rem}.modal-footer.jsx-23214182e0f186a5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:.75rem;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:1.5rem;border-top:1px solid#e5e7eb;background:#f9fafb;-webkit-border-radius:0 0 12px 12px;-moz-border-radius:0 0 12px 12px;border-radius:0 0 12px 12px}.form-group.jsx-23214182e0f186a5{margin-bottom:1.25rem}.form-label.jsx-23214182e0f186a5{display:block;font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.form-input.jsx-23214182e0f186a5{width:100%;padding:.625rem .875rem;border:1px solid#d1d5db;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.9375rem;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.form-input.jsx-23214182e0f186a5:focus{outline:none;border-color:#6366f1;-webkit-box-shadow:0 0 0 3px rgba(99,102,241,.1);-moz-box-shadow:0 0 0 3px rgba(99,102,241,.1);box-shadow:0 0 0 3px rgba(99,102,241,.1)}.alert.jsx-23214182e0f186a5{padding:.875rem 1rem;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.875rem;margin-bottom:1rem}.alert-error.jsx-23214182e0f186a5{background:#fef2f2;color:#991b1b;border:1px solid#fecaca}"}),(0,a.jsx)("div",{className:"jsx-23214182e0f186a5 modal-overlay",children:(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-content",children:[(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-header",children:[(0,a.jsx)("h2",{className:"jsx-23214182e0f186a5 modal-title",children:"Edit Customer"}),(0,a.jsx)("button",{onClick:s,className:"jsx-23214182e0f186a5 modal-close",children:(0,a.jsx)(f.Z,{size:20})})]}),(0,a.jsxs)("form",{onSubmit:k,className:"jsx-23214182e0f186a5",children:[(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-body",children:[y&&(0,a.jsx)("div",{className:"jsx-23214182e0f186a5 alert alert-error",children:y}),(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[(0,a.jsx)("label",{className:"jsx-23214182e0f186a5 form-label",children:"Full Name"}),(0,a.jsx)("input",{type:"text",value:n,onChange:e=>o(e.target.value),required:!0,className:"jsx-23214182e0f186a5 form-input"})]}),(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[(0,a.jsx)("label",{className:"jsx-23214182e0f186a5 form-label",children:"Phone Number"}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Optional",className:"jsx-23214182e0f186a5 form-input"})]}),(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[(0,a.jsx)("label",{className:"jsx-23214182e0f186a5 form-label",children:"Email"}),(0,a.jsx)("input",{type:"email",value:m,onChange:e=>x(e.target.value),placeholder:"Optional",className:"jsx-23214182e0f186a5 form-input"})]}),(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[(0,a.jsx)("label",{className:"jsx-23214182e0f186a5 form-label",children:"Address"}),(0,a.jsx)("input",{type:"text",value:u,onChange:e=>b(e.target.value),placeholder:"Optional",className:"jsx-23214182e0f186a5 form-input"})]})]}),(0,a.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-footer",children:[(0,a.jsx)("button",{type:"button",onClick:s,disabled:h,className:"jsx-23214182e0f186a5 btn btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:h,className:"jsx-23214182e0f186a5 btn btn-primary",children:h?"Updating...":"Update Customer"})]})]})]})})]}):null}function h(){let[e,t]=(0,r.useState)([]),[s,u]=(0,r.useState)(!0),[p,f]=(0,r.useState)(""),[h,j]=(0,r.useState)(null),[y,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{k()},[]);let k=async()=>{try{let e=await fetch("/api/customers");if(e.ok){let s=await e.json();t(s)}}catch(e){console.error("Failed to fetch customers",e)}finally{u(!1)}},v=e=>{j(e),g(!0)},w=e.filter(e=>e.full_name.toLowerCase().includes(p.toLowerCase())||e.phone&&e.phone.toLowerCase().includes(p.toLowerCase())||e.email&&e.email.toLowerCase().includes(p.toLowerCase()));return(0,a.jsxs)("div",{style:{padding:"2rem"},children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"h3 mb-1",children:"Customer Management"}),(0,a.jsx)("p",{className:"text-muted",children:"Manage customer information and contacts"})]}),(0,a.jsxs)(x.default,{href:"/customers/add",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",fontSize:"0.9375rem",fontWeight:"500"},children:[(0,a.jsx)(i.Z,{size:18})," Add New Customer"]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold flex items-center gap-2",children:[(0,a.jsx)(l.Z,{size:20,className:"text-primary"}),"All Customers"]}),(0,a.jsxs)("div",{style:{position:"relative",width:"300px"},children:[(0,a.jsx)(n.Z,{size:16,className:"text-muted",style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)"}}),(0,a.jsx)("input",{type:"text",placeholder:"Search customers...",value:p,onChange:e=>f(e.target.value),style:{width:"100%",padding:"0.5rem 1rem 0.5rem 2.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.9rem"}})]})]}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,a.jsx)("thead",{style:{background:"var(--background)",color:"var(--foreground-secondary)",fontSize:"0.85rem",textAlign:"left"},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Customer"}),(0,a.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Contact"}),(0,a.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Address"}),(0,a.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Balance"}),(0,a.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Actions"})]})}),(0,a.jsx)("tbody",{style:{fontSize:"0.95rem"},children:s?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-4 text-center",children:"Loading customers..."})}):0===w.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"p-4 text-center text-muted",children:"No customers found"})}):w.map(e=>(0,a.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,a.jsx)("td",{style:{padding:"1rem"},children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:"var(--surface-hover)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--primary)",fontWeight:"bold"},children:e.full_name.charAt(0)}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.full_name}),(0,a.jsxs)("div",{className:"text-xs text-muted",children:["ID: ",e.customer_id]})]})]})}),(0,a.jsxs)("td",{style:{padding:"1rem"},children:[e.phone&&(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)(o.Z,{size:14,className:"text-muted"}),e.phone]}),e.email&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{size:14,className:"text-muted"}),e.email]}),!e.phone&&!e.email&&(0,a.jsx)("span",{className:"text-muted",children:"-"})]}),(0,a.jsx)("td",{style:{padding:"1rem"},children:e.address?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Z,{size:14,className:"text-muted"}),e.address]}):(0,a.jsx)("span",{className:"text-muted",children:"-"})}),(0,a.jsx)("td",{style:{padding:"1rem"},children:(0,a.jsxs)("span",{style:{color:Number(e.balance)>0?"var(--success)":"inherit"},children:["$",Number(e.balance).toFixed(2)]})}),(0,a.jsx)("td",{style:{padding:"1rem"},children:(0,a.jsx)("button",{onClick:()=>v(e),className:"btn btn-icon btn-sm",title:"Edit Customer",children:(0,a.jsx)(m.Z,{size:16})})})]},e.customer_id))})]})]}),(0,a.jsx)(b,{isOpen:y,onClose:()=>g(!1),customer:h,onSuccess:()=>{k()}})]})}},87461:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(64090),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{color:n="currentColor",size:o=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:m="",children:x,...u}=s;return(0,a.createElement)("svg",{ref:l,...r,width:o,height:o,stroke:n,strokeWidth:c?24*Number(d)/Number(o):d,className:["lucide","lucide-".concat(i(e)),m].join(" "),...u},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(x)?x:[x]])});return s.displayName="".concat(e),s}},90684:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},62457:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},85904:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},70094:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},28670:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},29295:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},34059:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},52235:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return r.a}});var a=s(25250),r=s.n(a)}},function(e){e.O(0,[250,102,971,69,744],function(){return e(e.s=36420)}),_N_E=e.O()}]);