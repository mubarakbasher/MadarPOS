(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{52539:function(e,t,a){Promise.resolve().then(a.bind(a,26553))},26553:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return j}});var r=a(3827),s=a(64090),n=a(70094),o=a(4697),i=a(28670),l=a(62457),d=a(85904),c=a(29295),x=a(50489),m=a(8792),u=a(47907),h=a(69102),b=a.n(h),f=a(52235);function p(e){let{isOpen:t,onClose:a,branch:n,onSuccess:o}=e,[i,l]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[u,h]=(0,s.useState)(!1),[p,j]=(0,s.useState)("");(0,s.useEffect)(()=>{n&&t&&(l(n.branch_name),c(n.location||""),m(n.phone||""))},[n,t]);let y=async e=>{e.preventDefault(),j(""),h(!0);try{let e=await fetch("/api/branches/".concat(null==n?void 0:n.branch_id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({branch_name:i,location:d||null,phone:x||null})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to update branch");o(),a()}catch(e){j(e.message)}finally{h(!1)}};return t&&n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b(),{id:"23214182e0f186a5",children:".modal-overlay.jsx-23214182e0f186a5{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;z-index:9999;padding:1rem}.modal-content.jsx-23214182e0f186a5{background:white;-webkit-border-radius:12px;-moz-border-radius:12px;border-radius:12px;-webkit-box-shadow:0 20px 60px rgba(0,0,0,.3);-moz-box-shadow:0 20px 60px rgba(0,0,0,.3);box-shadow:0 20px 60px rgba(0,0,0,.3);width:100%;max-width:500px;max-height:90vh;overflow-y:auto}.modal-header.jsx-23214182e0f186a5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:1.5rem;border-bottom:1px solid#e5e7eb}.modal-title.jsx-23214182e0f186a5{font-size:1.25rem;font-weight:700;color:#111827;margin:0}.modal-close.jsx-23214182e0f186a5{background:none;border:none;cursor:pointer;padding:.5rem;color:#6b7280;-webkit-border-radius:6px;-moz-border-radius:6px;border-radius:6px;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.modal-close.jsx-23214182e0f186a5:hover{background:#f3f4f6;color:#111827}.modal-body.jsx-23214182e0f186a5{padding:1.5rem}.modal-footer.jsx-23214182e0f186a5{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;gap:.75rem;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:1.5rem;border-top:1px solid#e5e7eb;background:#f9fafb;-webkit-border-radius:0 0 12px 12px;-moz-border-radius:0 0 12px 12px;border-radius:0 0 12px 12px}.form-group.jsx-23214182e0f186a5{margin-bottom:1.25rem}.form-label.jsx-23214182e0f186a5{display:block;font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.form-input.jsx-23214182e0f186a5{width:100%;padding:.625rem .875rem;border:1px solid#d1d5db;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.9375rem;-webkit-transition:all.2s;-moz-transition:all.2s;-o-transition:all.2s;transition:all.2s}.form-input.jsx-23214182e0f186a5:focus{outline:none;border-color:#6366f1;-webkit-box-shadow:0 0 0 3px rgba(99,102,241,.1);-moz-box-shadow:0 0 0 3px rgba(99,102,241,.1);box-shadow:0 0 0 3px rgba(99,102,241,.1)}.alert.jsx-23214182e0f186a5{padding:.875rem 1rem;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.875rem;margin-bottom:1rem}.alert-error.jsx-23214182e0f186a5{background:#fef2f2;color:#991b1b;border:1px solid#fecaca}"}),(0,r.jsx)("div",{className:"jsx-23214182e0f186a5 modal-overlay",children:(0,r.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-content",children:[(0,r.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-header",children:[(0,r.jsx)("h2",{className:"jsx-23214182e0f186a5 modal-title",children:"Edit Branch"}),(0,r.jsx)("button",{onClick:a,className:"jsx-23214182e0f186a5 modal-close",children:(0,r.jsx)(f.Z,{size:20})})]}),(0,r.jsxs)("form",{onSubmit:y,className:"jsx-23214182e0f186a5",children:[(0,r.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-body",children:[p&&(0,r.jsx)("div",{className:"jsx-23214182e0f186a5 alert alert-error",children:p}),(0,r.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[(0,r.jsx)("label",{className:"jsx-23214182e0f186a5 form-label",children:"Branch Name"}),(0,r.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value),required:!0,className:"jsx-23214182e0f186a5 form-input"})]}),(0,r.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[(0,r.jsx)("label",{className:"jsx-23214182e0f186a5 form-label",children:"Location / Address"}),(0,r.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Optional",className:"jsx-23214182e0f186a5 form-input"})]}),(0,r.jsxs)("div",{className:"jsx-23214182e0f186a5 form-group",children:[(0,r.jsx)("label",{className:"jsx-23214182e0f186a5 form-label",children:"Phone Number"}),(0,r.jsx)("input",{type:"text",value:x,onChange:e=>m(e.target.value),placeholder:"Optional",className:"jsx-23214182e0f186a5 form-input"})]})]}),(0,r.jsxs)("div",{className:"jsx-23214182e0f186a5 modal-footer",children:[(0,r.jsx)("button",{type:"button",onClick:a,disabled:u,className:"jsx-23214182e0f186a5 btn btn-secondary",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:u,className:"jsx-23214182e0f186a5 btn btn-primary",children:u?"Updating...":"Update Branch"})]})]})]})})]}):null}function j(){let[e,t]=(0,s.useState)([]),[a,h]=(0,s.useState)(!0),[b,f]=(0,s.useState)(""),[j,y]=(0,s.useState)(null),[g,k]=(0,s.useState)(!1);(0,u.useRouter)(),(0,s.useEffect)(()=>{w()},[]);let w=async()=>{try{let e=await fetch("/api/branches");if(e.ok){let a=await e.json();t(a)}}catch(e){console.error("Failed to fetch branches",e)}finally{h(!1)}},v=async e=>{if(confirm("Are you sure you want to delete this branch?"))try{let t=await fetch("/api/branches/".concat(e),{method:"DELETE"});if(t.ok)w();else{let e=await t.json();alert(e.error||"Failed to delete branch")}}catch(e){console.error("Failed to delete branch",e)}},N=e=>{y(e),k(!0)},z=e.filter(e=>e.branch_name.toLowerCase().includes(b.toLowerCase())||e.location&&e.location.toLowerCase().includes(b.toLowerCase()));return(0,r.jsxs)("div",{style:{padding:"2rem"},children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"h3 mb-1",children:"Branch Management"}),(0,r.jsx)("p",{className:"text-muted",children:"Manage store locations and outlets"})]}),(0,r.jsxs)(m.default,{href:"/branches/add",className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.625rem 1.25rem",fontSize:"0.9375rem",fontWeight:"500"},children:[(0,r.jsx)(n.Z,{size:18})," Add New Branch"]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",style:{padding:"1.5rem",borderBottom:"1px solid var(--border)"},children:[(0,r.jsxs)("h2",{className:"text-lg font-bold flex items-center gap-2",children:[(0,r.jsx)(o.Z,{size:20,className:"text-primary"}),"All Branches"]}),(0,r.jsxs)("div",{style:{position:"relative",width:"300px"},children:[(0,r.jsx)(i.Z,{size:16,className:"text-muted",style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)"}}),(0,r.jsx)("input",{type:"text",placeholder:"Search branches...",value:b,onChange:e=>f(e.target.value),style:{width:"100%",padding:"0.5rem 1rem 0.5rem 2.5rem",borderRadius:"var(--radius-sm)",border:"1px solid var(--border)",fontSize:"0.9rem"},className:"input"})]})]}),(0,r.jsx)("div",{style:{overflowX:"auto"},children:(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,r.jsx)("thead",{style:{background:"var(--background)",color:"var(--text-muted)",fontSize:"0.85rem",textAlign:"left"},children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Branch Name"}),(0,r.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Location"}),(0,r.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Phone"}),(0,r.jsx)("th",{style:{padding:"1rem",borderBottom:"1px solid var(--border)"},children:"Actions"})]})}),(0,r.jsx)("tbody",{style:{fontSize:"0.95rem"},children:a?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"p-4 text-center",style:{padding:"2rem"},children:"Loading branches..."})}):0===z.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"p-4 text-center text-muted",style:{padding:"2rem"},children:"No branches found"})}):z.map(e=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid var(--border)"},children:[(0,r.jsxs)("td",{style:{padding:"1rem"},children:[(0,r.jsx)("div",{className:"font-bold",children:e.branch_name}),(0,r.jsxs)("div",{className:"text-xs text-muted",children:["ID: ",e.branch_id]})]}),(0,r.jsx)("td",{style:{padding:"1rem"},children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Z,{size:14,className:"text-muted"}),e.location||"-"]})}),(0,r.jsx)("td",{style:{padding:"1rem"},children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(d.Z,{size:14,className:"text-muted"}),e.phone||"-"]})}),(0,r.jsx)("td",{style:{padding:"1rem"},children:(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>N(e),className:"btn btn-icon btn-sm",title:"Edit Branch",children:(0,r.jsx)(c.Z,{size:16})}),(0,r.jsx)("button",{className:"text-muted hover:text-danger p-1 transition-colors",onClick:()=>v(e.branch_id),title:"Delete",children:(0,r.jsx)(x.Z,{size:16})})]})})]},e.branch_id))})]})})]}),(0,r.jsx)(p,{isOpen:g,onClose:()=>k(!1),branch:j,onSuccess:()=>{w()}})]})}},87461:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var r=a(64090),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let a=(0,r.forwardRef)((a,o)=>{let{color:i="currentColor",size:l=24,strokeWidth:d=2,absoluteStrokeWidth:c,className:x="",children:m,...u}=a;return(0,r.createElement)("svg",{ref:o,...s,width:l,height:l,stroke:i,strokeWidth:c?24*Number(d)/Number(l):d,className:["lucide","lucide-".concat(n(e)),x].join(" "),...u},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(e),a}},62457:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4697:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},85904:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},70094:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},28670:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},29295:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])},50489:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},52235:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,a(87461).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},8792:function(e,t,a){"use strict";a.d(t,{default:function(){return s.a}});var r=a(25250),s=a.n(r)},47907:function(e,t,a){"use strict";var r=a(15313);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[250,102,971,69,744],function(){return e(e.s=52539)}),_N_E=e.O()}]);