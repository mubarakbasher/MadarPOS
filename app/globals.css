@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700&display=swap');
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* --- MODERN SAAS / ENTERPRISE TOKENS (HSL) --- */

        /* Base Colors - Slate/Zinc inspired for professional clean look */
        --background: 210 40% 98%;
        /* Clean Light Gray */
        --foreground: 222 47% 11%;
        /* Deep Navy Black */

        --card: 0 0% 100%;
        /* Pure White */
        --card-foreground: 222 47% 11%;

        --popover: 0 0% 100%;
        --popover-foreground: 222 47% 11%;

        /* Primary - Royal Blue / Indigo */
        --primary: 221 83% 53%;
        /* Vivid Professional Blue */
        --primary-foreground: 210 40% 98%;

        /* Secondary - Subtle Blue-Gray */
        --secondary: 210 40% 96.1%;
        --secondary-foreground: 222 47% 11.2%;

        /* Muted - For secondary text */
        --muted: 210 40% 96.1%;
        --muted-foreground: 215 16% 47%;

        /* Accent - For hovers and interactive elements */
        --accent: 210 40% 96.1%;
        --accent-foreground: 222 47% 11.2%;

        /* Destructive - Soft Red */
        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;

        /* Borders & Inputs */
        --border: 214 32% 91%;
        --input: 214 32% 91%;
        --ring: 221 83% 53%;

        --radius: 0.75rem;
        /* Modern rounded corners */

        /* --- LEGACY TOKEN MAPPING (For backward compatibility) --- */
        --pk-50: hsl(221 83% 97%);
        --pk-100: hsl(221 83% 93%);
        --pk-200: hsl(221 83% 86%);
        --pk-500: hsl(221 83% 53%);
        --pk-600: hsl(221 83% 48%);
        --pk-700: hsl(221 83% 40%);

        --nk-0: #ffffff;
        --nk-50: hsl(210 40% 98%);
        --nk-100: hsl(210 40% 96%);
        --nk-200: hsl(214 32% 91%);
        --nk-300: hsl(214 32% 85%);
        --nk-400: hsl(215 16% 47%);
        --nk-500: hsl(215 25% 27%);
        --nk-600: hsl(215 25% 20%);
        --nk-700: hsl(215 25% 15%);
        --nk-800: hsl(222 47% 11%);
        --nk-900: hsl(222 47% 11%);

        --app-bg: hsl(var(--background));
        --card-bg: hsl(var(--card));
        --card-border: hsl(var(--border));
        --text-primary: hsl(var(--foreground));
        --text-secondary: hsl(var(--muted-foreground));
        --brand-prime: hsl(var(--primary));

        --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);
        --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
        --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        --shadow-glow: 0 0 15px rgba(79, 70, 229, 0.15);

        --rad-sm: 0.375rem;
        --rad-md: 0.5rem;
        --rad-lg: 0.75rem;
    }

    .dark {
        --background: 222 47% 11%;
        --foreground: 210 40% 98%;

        --card: 217 33% 17%;
        --card-foreground: 210 40% 98%;

        --popover: 217 33% 17%;
        --popover-foreground: 210 40% 98%;

        --primary: 217 91% 60%;
        --primary-foreground: 222 47% 11.2%;

        --secondary: 217 32% 17%;
        --secondary-foreground: 210 40% 98%;

        --muted: 217 32% 17%;
        --muted-foreground: 215 20% 65%;

        --accent: 217 32% 17%;
        --accent-foreground: 210 40% 98%;

        --destructive: 0 62.8% 30.6%;
        --destructive-foreground: 210 40% 98%;

        --border: 217 32% 25%;
        --input: 217 32% 25%;
        --ring: 217 91% 60%;

        /* Update legacy vars for dark mode */
        --nk-0: hsl(217 33% 17%);
        --nk-50: hsl(222 47% 11%);
        --nk-100: hsl(217 32% 17%);
        --nk-200: hsl(217 32% 25%);
        --nk-300: hsl(217 32% 35%);
        --nk-400: hsl(215 20% 65%);
        --nk-500: hsl(215 20% 75%);
        --nk-800: hsl(210 40% 98%);
        --nk-900: #ffffff;

        --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.5);
        --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.5), 0 1px 2px -1px rgb(0 0 0 / 0.5);
    }
}

@layer base {
    * {
        @apply border-border;
    }

    body {
        @apply bg-background text-foreground;
        font-family: 'Inter', 'Outfit', sans-serif;
    }
}

/* --- LEGACY / MANUAL UTILITIES PRESERVED FOR LAYOUT --- */
/* Re-implemented using new CSS variables for consistency */

.text-xs {
    font-size: 0.75rem;
    line-height: 1rem;
}

.text-sm {
    font-size: 0.875rem;
    line-height: 1.25rem;
}

.text-lg {
    font-size: 1.125rem;
    line-height: 1.75rem;
}

.text-xl {
    font-size: 1.25rem;
    line-height: 1.75rem;
}

.text-2xl {
    font-size: 1.5rem;
    line-height: 2rem;
}

.font-medium {
    font-weight: 500;
}

.font-bold {
    font-weight: 700;
}

/* Colors Mapped to Theme */
.text-gray-400 {
    color: hsl(var(--muted-foreground));
}

.text-gray-500 {
    color: hsl(var(--muted-foreground));
}

.text-gray-800 {
    color: hsl(var(--foreground));
}

.text-gray-900 {
    color: hsl(var(--foreground));
}

.text-indigo-600 {
    color: hsl(var(--primary));
}

.text-white {
    color: hsl(var(--primary-foreground));
}

.text-red-500 {
    color: hsl(var(--destructive));
}

.text-green-500 {
    color: #22c55e;
}

/* Keep green as success */
.text-blue-500 {
    color: #3b82f6;
}

/* Backgrounds */
.bg-white {
    background-color: hsl(var(--card));
}

/* Crucial for cards */
.bg-gray-50 {
    background-color: hsl(var(--background));
}

.bg-gray-100 {
    background-color: hsl(var(--muted));
}

.bg-indigo-600 {
    background-color: hsl(var(--primary));
}

.bg-indigo-50 {
    background-color: hsl(var(--primary) / 0.1);
}

.bg-green-500 {
    background-color: #22c55e;
}

.bg-rose-500 {
    background-color: hsl(var(--destructive));
}

/* Borders */
.border {
    border-width: 1px;
    border-style: solid;
    border-color: hsl(var(--border));
}

.border-b {
    border-bottom-width: 1px;
}

.border-t {
    border-top-width: 1px;
}

.border-r {
    border-right-width: 1px;
}

.border-gray-100 {
    border-color: hsl(var(--border));
}

.border-gray-200 {
    border-color: hsl(var(--border));
}

.border-transparent {
    border-color: transparent;
}

/* Existing Layout Utilities - MUST PRESERVE */
.flex {
    display: flex;
}

.flex-col {
    flex-direction: column;
}

.items-center {
    align-items: center;
}

.justify-between {
    justify-content: space-between;
}

.justify-center {
    justify-content: center;
}

.flex-1 {
    flex: 1 1 0%;
}

.gap-1 {
    gap: 0.25rem;
}

.gap-2 {
    gap: 0.5rem;
}

.gap-3 {
    gap: 0.75rem;
}

.gap-4 {
    gap: 1rem;
}

.gap-6 {
    gap: 1.5rem;
}

.grid {
    display: grid;
}

.grid-cols-4 {
    grid-template-columns: repeat(4, minmax(0, 1fr));
}

.col-span-2 {
    grid-column: span 2 / span 2;
}

.col-span-1 {
    grid-column: span 1 / span 1;
}

.w-full {
    width: 100%;
}

.h-full {
    height: 100%;
}

.h-screen {
    height: 100vh;
}

.fixed {
    position: fixed;
}

.absolute {
    position: absolute;
}

.relative {
    position: relative;
}

.left-0 {
    left: 0;
}

.top-0 {
    top: 0;
}

.z-50 {
    z-index: 50;
}

.z-10 {
    z-index: 10;
}

.-z-10 {
    z-index: -10;
}

/* Specific Widths (Legacy JIT polyfill) */
.w-\[280px\] {
    width: 280px;
}

.w-\[320px\] {
    width: 320px;
}

.ml-\[280px\] {
    margin-left: 280px;
}

.w-\[calc\(100\%-280px\)\] {
    width: calc(100% - 280px);
}

.max-w-\[1600px\] {
    max-width: 1600px;
}

.mx-auto {
    margin-left: auto;
    margin-right: auto;
}

/* Spacing */
.p-2 {
    padding: 0.5rem;
}

.p-2\.5 {
    padding: 0.625rem;
}

.p-3 {
    padding: 0.75rem;
}

.p-4 {
    padding: 1rem;
}

.p-6 {
    padding: 1.5rem;
}

.p-8 {
    padding: 2rem;
}

.px-4 {
    padding-left: 1rem;
    padding-right: 1rem;
}

.py-2 {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
}

.mb-4 {
    margin-bottom: 1rem;
}

.mb-6 {
    margin-bottom: 1.5rem;
}

.mb-8 {
    margin-bottom: 2rem;
}

.mt-1 {
    margin-top: 0.25rem;
}

/* Effects */
.shadow-sm {
    box-shadow: var(--shadow-sm);
}

.shadow-lg {
    box-shadow: var(--shadow-md);
}

.backdrop-blur-md {
    backdrop-filter: blur(12px);
}

.rounded-xl {
    border-radius: var(--rad-md);
}

.rounded-2xl {
    border-radius: var(--rad-lg);
}

.rounded-full {
    border-radius: 9999px;
}

.overflow-hidden {
    overflow: hidden;
}

.overflow-auto {
    overflow: auto;
}

/* Animation / Transition */
@keyframes spin {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

.animate-spin {
    animation: spin 1s linear infinite;
}

.transition-all {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
}

/* Gradients */
.bg-gradient-to-b {
    background-image: linear-gradient(to bottom, var(--tw-gradient-stops));
}

.bg-gradient-to-r {
    background-image: linear-gradient(to right, var(--tw-gradient-stops));
}

.from-indigo-50\/50 {
    --tw-gradient-from: hsl(var(--primary) / 0.1);
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(238, 242, 255, 0));
}

.to-transparent {
    --tw-gradient-to: transparent;
}

.from-gray-50 {
    --tw-gradient-from: hsl(var(--background));
    --tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to, rgba(248, 250, 252, 0));
}

.to-white {
    --tw-gradient-to: hsl(var(--card));
}

/* Scrollbar */
::-webkit-scrollbar {
    width: 6px;
    height: 6px;
}

::-webkit-scrollbar-track {
    background: transparent;
}

::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground));
}

/* ========================================
   MOBILE RESPONSIVENESS & PWA ENHANCEMENTS
   ======================================== */

/* Touch-friendly minimum sizes */
:root {
    --touch-target-min: 44px;
    --mobile-padding: 1rem;
    --sidebar-width: 280px;
}

/* Responsive breakpoints */
@media (max-width: 1024px) {

    /* Tablet: Adjust sidebar */
    .w-\[280px\] {
        width: 240px;
    }

    .ml-\[280px\] {
        margin-left: 240px;
    }

    .w-\[calc\(100\%-280px\)\] {
        width: calc(100% - 240px);
    }
}

@media (max-width: 768px) {
    /* Mobile: Hide sidebar by default, show hamburger */

    /* Sidebar transformations */
    .sidebar-mobile-hidden {
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
    }

    .sidebar-mobile-shown {
        transform: translateX(0);
        transition: transform 0.3s ease-in-out;
    }

    /* Mobile overlay for sidebar */
    .mobile-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 40;
        display: none;
    }

    .mobile-overlay.active {
        display: block;
    }

    /* Remove sidebar margin on mobile */
    .ml-\[280px\] {
        margin-left: 0 !important;
    }

    .w-\[calc\(100\%-280px\)\] {
        width: 100% !important;
    }

    /* Make sidebar full width on mobile */
    .w-\[280px\] {
        width: 280px;
        position: fixed !important;
        left: 0;
        top: 0;
        height: 100vh;
        z-index: 50;
    }

    /* Grid adjustments */
    .grid-cols-4 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    /* Stack elements vertically */
    .mobile-stack {
        flex-direction: column !important;
    }

    /* Touch-friendly buttons */
    button,
    .btn,
    a[class*="btn"] {
        min-height: var(--touch-target-min);
        min-width: var(--touch-target-min);
    }

    /* Responsive padding */
    .p-8 {
        padding: var(--mobile-padding);
    }

    .p-6 {
        padding: var(--mobile-padding);
    }

    /* Mobile-optimized modals */
    .modal-content,
    .receipt-modal-content {
        max-width: 95vw !important;
        margin: 1rem;
    }

    /* Smaller text on mobile */
    .h3 {
        font-size: 1.25rem;
    }

    .text-2xl {
        font-size: 1.375rem;
        line-height: 1.875rem;
    }
}

@media (max-width: 480px) {
    /* Small mobile: Further optimizations */

    /* Even smaller modal */
    .modal-content,
    .receipt-modal-content {
        max-width: 100vw !important;
        margin: 0.5rem;
        border-radius: 0.5rem;
    }

    /* Reduce grid columns */
    .grid-cols-4,
    .grid-cols-2 {
        grid-template-columns: 1fr;
    }

    /* Compact headers */
    .h3 {
        font-size: 1.125rem;
    }

    /* Adjust form inputs */
    .form-input,
    .input {
        font-size: 16px;
        /* Prevent zoom on iOS */
    }
}

/* Hamburger menu button */
.hamburger-menu {
    display: none;
    position: fixed;
    top: 1rem;
    left: 1rem;
    z-index: 60;
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: 0.5rem;
    padding: 0.75rem;
    cursor: pointer;
    box-shadow: var(--shadow-sm);
}

@media (max-width: 768px) {
    .hamburger-menu {
        display: flex;
        align-items: center;
        justify-content: center;
    }
}

/* PWA Install prompt */
.pwa-install-prompt {
    position: fixed;
    bottom: 1rem;
    left: 50%;
    transform: translateX(-50%);
    background: hsl(var(--card));
    border: 1px solid hsl(var(--border));
    border-radius: 0.75rem;
    padding: 1rem 1.5rem;
    box-shadow: var(--shadow-md);
    z-index: 1000;
    max-width: 90vw;
    display: flex;
    gap: 1rem;
    align-items: center;
}

/* Offline indicator */
.offline-indicator {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: #f59e0b;
    color: white;
    padding: 0.5rem;
    text-align: center;
    font-size: 0.875rem;
    font-weight: 500;
    z-index: 9999;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Mobile-optimized tables */
@media (max-width: 768px) {
    .mobile-table-scroll {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }

    table {
        min-width: 600px;
        /* Force horizontal scroll */
    }

    /* Alternative: Stack table for very small screens */
    .mobile-stacked-table {
        display: block;
    }

    .mobile-stacked-table thead {
        display: none;
    }

    .mobile-stacked-table tbody {
        display: block;
    }

    .mobile-stacked-table tr {
        display: block;
        margin-bottom: 1rem;
        border: 1px solid hsl(var(--border));
        border-radius: 0.5rem;
        padding: 1rem;
    }

    .mobile-stacked-table td {
        display: flex;
        justify-content: space-between;
        padding: 0.5rem 0;
        border-bottom: 1px solid hsl(var(--border));
    }

    .mobile-stacked-table td:last-child {
        border-bottom: none;
    }

    .mobile-stacked-table td::before {
        content: attr(data-label);
        font-weight: 600;
        margin-right: 1rem;
    }
}

/* POS-specific mobile optimizations */
@media (max-width: 768px) {

    /* POS product grid */
    .pos-product-grid {
        grid-template-columns: repeat(2, 1fr) !important;
        gap: 0.75rem;
    }

    /* Cart on mobile */
    .pos-cart-mobile {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        max-height: 50vh;
        background: hsl(var(--card));
        border-top: 2px solid hsl(var(--primary));
        z-index: 30;
        overflow-y: auto;
    }
}

/* Safe area insets for notched devices */
@supports (padding: max(0px)) {
    body {
        padding-left: max(0px, env(safe-area-inset-left));
        padding-right: max(0px, env(safe-area-inset-right));
    }

    .pwa-install-prompt {
        bottom: max(1rem, env(safe-area-inset-bottom));
    }
}

/* Print optimizations (maintain existing) */
@media print {

    .hamburger-menu,
    .sidebar,
    .offline-indicator,
    .pwa-install-prompt {
        display: none !important;
    }
}

/* Loading states for PWA */
.pwa-loading {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999;
}

/* Smooth transitions for responsive changes */
* {
    transition: margin 0.3s ease, width 0.3s ease;
}

button,
a,
input,
select,
textarea {
    transition: none;
    /* Don't transition form elements */
}